# ğŸ“ 0. Project Title: Document Management System (DMS) Web Application for Laem Chabang Port Development Project, Phase 3

## 0. Project

### ğŸ“Œ 0.1 Project Overview / Description

- à¸£à¸°à¸šà¸š Document Management System (DMS) à¹€à¸›à¹‡à¸™à¹€à¸§à¹‡à¸šà¹à¸­à¸›à¸à¸¥à¸´à¹€à¸„à¸Šà¸±à¸™à¸—à¸µà¹ˆà¸­à¸­à¸à¹à¸šà¸šà¸¡à¸²à¹€à¸à¸·à¹ˆà¸­à¸ˆà¸±à¸”à¸à¸²à¸£à¹€à¸­à¸à¸ªà¸²à¸£à¸ à¸²à¸¢à¹ƒà¸™à¹‚à¸„à¸£à¸‡à¸à¸²à¸£à¸­à¸¢à¹ˆà¸²à¸‡à¸¡à¸µà¸›à¸£à¸°à¸ªà¸´à¸—à¸˜à¸´à¸ à¸²à¸
- à¹‚à¸”à¸¢à¸¡à¸µà¸Ÿà¸±à¸‡à¸à¹Œà¸Šà¸±à¸™à¸«à¸¥à¸±à¸à¹ƒà¸™à¸à¸²à¸£à¸­à¸±à¸›à¹‚à¸«à¸¥à¸” à¸ˆà¸±à¸”à¹€à¸à¹‡à¸š à¸„à¹‰à¸™à¸«à¸² à¹à¸Šà¸£à¹Œ à¹à¸¥à¸°à¸„à¸§à¸šà¸„à¸¸à¸¡à¸ªà¸´à¸—à¸˜à¸´à¹Œà¸à¸²à¸£à¹€à¸‚à¹‰à¸²à¸–à¸¶à¸‡à¹€à¸­à¸à¸ªà¸²à¸£
- à¸£à¸°à¸šà¸šà¸™à¸µà¹‰à¸ˆà¸°à¸Šà¹ˆà¸§à¸¢à¸¥à¸”à¸à¸²à¸£à¹ƒà¸Šà¹‰à¹€à¸­à¸à¸ªà¸²à¸£à¸à¸£à¸°à¸”à¸²à¸© à¹€à¸à¸´à¹ˆà¸¡à¸„à¸§à¸²à¸¡à¸›à¸¥à¸­à¸”à¸ à¸±à¸¢à¹ƒà¸™à¸à¸²à¸£à¸ˆà¸±à¸”à¹€à¸à¹‡à¸šà¸‚à¹‰à¸­à¸¡à¸¹à¸¥
- à¹€à¸à¸´à¹ˆà¸¡à¸„à¸§à¸²à¸¡à¸ªà¸°à¸”à¸§à¸à¹ƒà¸™à¸à¸²à¸£à¸—à¸³à¸‡à¸²à¸™à¸£à¹ˆà¸§à¸¡à¸à¸±à¸™à¸£à¸°à¸«à¸§à¹ˆà¸²à¸‡à¸­à¸‡à¸à¸£à¸“à¹Œ

### ğŸ¯ 0.2 Objectives

- à¸à¸±à¸’à¸™à¸²à¸£à¸°à¸šà¸šà¸—à¸µà¹ˆà¸ªà¸²à¸¡à¸²à¸£à¸–à¸ˆà¸±à¸”à¸à¸²à¸£à¹€à¸­à¸à¸ªà¸²à¸£à¹„à¸”à¹‰à¸­à¸¢à¹ˆà¸²à¸‡à¹€à¸›à¹‡à¸™à¸£à¸°à¸šà¸š
- à¸¥à¸”à¸„à¸§à¸²à¸¡à¸‹à¹‰à¸³à¸‹à¹‰à¸­à¸™à¹ƒà¸™à¸à¸²à¸£à¸ˆà¸±à¸”à¹€à¸à¹‡à¸šà¹€à¸­à¸à¸ªà¸²à¸£
- à¹€à¸à¸´à¹ˆà¸¡à¸„à¸§à¸²à¸¡à¸›à¸¥à¸­à¸”à¸ à¸±à¸¢à¹ƒà¸™à¸à¸²à¸£à¹€à¸‚à¹‰à¸²à¸–à¸¶à¸‡à¹à¸¥à¸°à¸ˆà¸±à¸”à¸à¸²à¸£à¹€à¸­à¸à¸ªà¸²à¸£
- à¸£à¸­à¸‡à¸£à¸±à¸šà¸à¸²à¸£à¸—à¸³à¸‡à¸²à¸™à¸£à¹ˆà¸§à¸¡à¸à¸±à¸™à¹à¸šà¸šà¸­à¸­à¸™à¹„à¸¥à¸™à¹Œ

### ğŸ“¦ 0.3 Scope of Work

à¸£à¸°à¸šà¸šà¸ˆà¸°à¸„à¸£à¸­à¸šà¸„à¸¥à¸¸à¸¡à¸Ÿà¸µà¹€à¸ˆà¸­à¸£à¹Œà¸«à¸¥à¸±à¸à¸”à¸±à¸‡à¸™à¸µà¹‰:

- à¸à¸²à¸£à¸¥à¸‡à¸—à¸°à¹€à¸šà¸µà¸¢à¸™à¹à¸¥à¸°à¹€à¸‚à¹‰à¸²à¸ªà¸¹à¹ˆà¸£à¸°à¸šà¸š à¸‚à¸­à¸‡à¸œà¸¹à¹‰à¹ƒà¸Šà¹‰à¸‡à¸²à¸™
- à¸à¸²à¸£à¸­à¸±à¸›à¹‚à¸«à¸¥à¸”à¹à¸¥à¸°à¸ˆà¸±à¸”à¹€à¸à¹‡à¸šà¹€à¸­à¸à¸ªà¸²à¸£à¹ƒà¸™à¸£à¸¹à¸›à¹à¸šà¸šà¸•à¹ˆà¸²à¸‡ à¹† (PDF, DOCX, XLSX à¸¯à¸¥à¸¯)
- à¸à¸²à¸£à¸ˆà¸±à¸”à¸«à¸¡à¸§à¸”à¸«à¸¡à¸¹à¹ˆà¹à¸¥à¸°à¹à¸—à¹‡à¸à¹€à¸­à¸à¸ªà¸²à¸£
- à¸à¸²à¸£à¸„à¹‰à¸™à¸«à¸²à¹€à¸­à¸à¸ªà¸²à¸£à¸”à¹‰à¸§à¸¢à¸„à¸³à¸ªà¸³à¸„à¸±à¸à¸«à¸£à¸·à¸­à¸Ÿà¸´à¸¥à¹€à¸•à¸­à¸£à¹Œ
- à¸à¸²à¸£à¸à¸³à¸«à¸™à¸”à¸ªà¸´à¸—à¸˜à¸´à¹Œà¸à¸²à¸£à¹€à¸‚à¹‰à¸²à¸–à¸¶à¸‡à¹€à¸­à¸à¸ªà¸²à¸£ (à¹€à¸Šà¹ˆà¸™ à¸­à¹ˆà¸²à¸™à¸­à¸¢à¹ˆà¸²à¸‡à¹€à¸”à¸µà¸¢à¸§, à¹à¸à¹‰à¹„à¸‚, à¸¥à¸š)
- à¸à¸²à¸£à¸šà¸±à¸™à¸—à¸¶à¸à¸›à¸£à¸°à¸§à¸±à¸•à¸´à¸à¸²à¸£à¹ƒà¸Šà¹‰à¸‡à¸²à¸™à¹€à¸­à¸à¸ªà¸²à¸£ (Audit Trail)
- à¸à¸²à¸£à¸¡à¸­à¸šà¸«à¸¡à¸²à¸¢à¸‡à¸²à¸™à¹ƒà¸«à¹‰à¸à¸±à¸šà¸œà¸¹à¹‰à¹€à¸à¸µà¹ˆà¸¢à¸§à¸‚à¹‰à¸­à¸‡ à¹à¸¥à¸°à¹à¸ˆà¹‰à¸‡à¹€à¸•à¸·à¸­à¸™à¹€à¸¡à¸·à¹ˆà¸­à¸¡à¸µà¸à¸²à¸£à¸¡à¸­à¸šà¸«à¸¡à¸²à¸¢à¸‡à¸²à¸™
- à¸à¸²à¸£à¹à¸ˆà¹‰à¸‡à¹€à¸•à¸·à¸­à¸™à¹€à¸¡à¸·à¹ˆà¸­à¸–à¸¶à¸‡à¸à¸³à¸«à¸™à¸”à¸§à¸±à¸™à¸—à¸µà¹ˆà¸•à¹‰à¸­à¸‡à¸ªà¹ˆà¸‡à¹€à¸­à¸à¸ªà¸²à¸£à¸•à¹ˆà¸­à¹ƒà¸«à¹‰ à¸œà¸¹à¹‰à¹€à¸à¸µà¹ˆà¸¢à¸§à¸‚à¹‰à¸­à¸‡à¸­à¸·à¹ˆà¸™à¹†
- à¸à¸²à¸£à¹à¸ˆà¹‰à¸‡à¹€à¸•à¸·à¸­à¸™à¹€à¸¡à¸·à¹ˆà¸­à¸¡à¸µà¸à¸²à¸£à¹€à¸›à¸¥à¸µà¹ˆà¸¢à¸™à¹à¸›à¸¥à¸‡à¹€à¸­à¸à¸ªà¸²à¸£

### ğŸ‘¥ 0.4 Target Users

- à¸à¸™à¸±à¸à¸‡à¸²à¸™à¸ à¸²à¸¢à¹ƒà¸™ à¸‚à¸­à¸‡à¸­à¸‡à¸„à¹Œà¸à¸£
- à¸à¸™à¸±à¸à¸‡à¸²à¸™à¸„à¸§à¸šà¸„à¸¸à¸¡à¹€à¸­à¸à¸ªà¸²à¸£ (Document Control)/ à¸œà¸¹à¹‰à¸”à¸¹à¹à¸¥à¸£à¸°à¸šà¸šà¸‚à¸­à¸‡à¸­à¸‡à¸„à¹Œà¸à¸£ (admin)
- à¸œà¸¹à¹‰à¸ˆà¸±à¸”à¸à¸²à¸£à¸à¹ˆà¸²à¸¢à¹€à¸­à¸à¸ªà¸²à¸£ à¸‚à¸­à¸‡à¸­à¸‡à¸„à¹Œà¸à¸£
- à¸œà¸¹à¹‰à¸ˆà¸±à¸”à¸à¸²à¸£à¹‚à¸„à¸£à¸‡à¸à¸²à¸£ à¸‚à¸­à¸‡à¸­à¸‡à¸„à¹Œà¸à¸£
- à¸„à¸“à¸°à¸à¸£à¸£à¸¡à¸à¸²à¸£ à¸‚à¸­à¸‡à¹‚à¸„à¸£à¸‡à¸à¸²à¸£
- à¸œà¸¹à¹‰à¸”à¸¹à¹à¸¥à¸£à¸°à¸šà¸š IT à¸‚à¸­à¸‡à¹‚à¸„à¸£à¸‡à¸à¸²à¸£ (superadmin)

### ğŸ“ˆ 0.5 Expected Outcomes

- à¸¥à¸”à¹€à¸§à¸¥à¸²à¹ƒà¸™à¸à¸²à¸£à¸„à¹‰à¸™à¸«à¸²à¹€à¸­à¸à¸ªà¸²à¸£à¸¥à¸‡à¸­à¸¢à¹ˆà¸²à¸‡à¸™à¹‰à¸­à¸¢ 50%
- à¸¥à¸”à¹€à¸§à¸¥à¸²à¹ƒà¸™à¸à¸²à¸£à¸ˆà¸±à¸”à¸—à¸³à¸£à¸²à¸¢à¸‡à¸²à¸™à¹€à¸­à¸à¸ªà¸²à¸£ à¸›à¸£à¸°à¸ˆà¸³à¸§à¸±à¸™, à¸›à¸£à¸°à¸ˆà¸³à¸ªà¸±à¸›à¸”à¸²à¸«à¹Œ, à¸›à¸£à¸°à¸ˆà¸³à¹€à¸”à¸·à¸­à¸™, à¸›à¸£à¸°à¸ˆà¸³à¸›à¸µ à¹à¸¥à¸° à¸£à¸²à¸¢à¸‡à¸²à¸™à¹€à¸­à¸à¸ªà¸²à¸£à¸—à¸±à¹‰à¸‡à¹‚à¸„à¸£à¸‡à¸à¸²à¸£
- à¸¥à¸”à¸à¸²à¸£à¹ƒà¸Šà¹‰à¹€à¸­à¸à¸ªà¸²à¸£à¸à¸£à¸°à¸”à¸²à¸©à¹ƒà¸™à¸­à¸‡à¸„à¹Œà¸à¸£
- à¹€à¸à¸´à¹ˆà¸¡à¸„à¸§à¸²à¸¡à¸›à¸¥à¸­à¸”à¸ à¸±à¸¢à¹ƒà¸™à¸à¸²à¸£à¸ˆà¸±à¸”à¹€à¸à¹‡à¸šà¸‚à¹‰à¸­à¸¡à¸¹à¸¥
- à¸£à¸­à¸‡à¸£à¸±à¸šà¸à¸²à¸£à¸—à¸³à¸‡à¸²à¸™à¹à¸šà¸š Remote Work

### ğŸ“˜ 0.6 Requirements Use Cases

#### ğŸ“˜ Use Case: Upload Document

Actor: à¸à¸™à¸±à¸à¸‡à¸²à¸™à¸„à¸§à¸šà¸„à¸¸à¸¡à¹€à¸­à¸à¸ªà¸²à¸£ (Document Control)
Description: à¸à¸™à¸±à¸à¸‡à¸²à¸™à¸„à¸§à¸šà¸„à¸¸à¸¡à¹€à¸­à¸à¸ªà¸²à¸£à¸ªà¸²à¸¡à¸²à¸£à¸–à¸­à¸±à¸›à¹‚à¸«à¸¥à¸”à¹€à¸­à¸à¸ªà¸²à¸£à¹€à¸‚à¹‰à¸²à¸ªà¸¹à¹ˆà¸£à¸°à¸šà¸šà¹€à¸à¸·à¹ˆà¸­à¸ˆà¸±à¸”à¹€à¸à¹‡à¸šà¹à¸¥à¸°à¹ƒà¸Šà¹‰à¸‡à¸²à¸™à¹ƒà¸™à¸ à¸²à¸¢à¸«à¸¥à¸±à¸‡
Preconditions: à¸à¸™à¸±à¸à¸‡à¸²à¸™à¸„à¸§à¸šà¸„à¸¸à¸¡à¹€à¸­à¸à¸ªà¸²à¸£à¸•à¹‰à¸­à¸‡à¹€à¸‚à¹‰à¸²à¸ªà¸¹à¹ˆà¸£à¸°à¸šà¸šà¸à¹ˆà¸­à¸™
Main Flow:

à¸à¸™à¸±à¸à¸‡à¸²à¸™à¸„à¸§à¸šà¸„à¸¸à¸¡à¹€à¸­à¸à¸ªà¸²à¸£à¹€à¸¥à¸·à¸­à¸à¹€à¸¡à¸™à¸¹ â€œà¸­à¸±à¸›à¹‚à¸«à¸¥à¸”à¹€à¸­à¸à¸ªà¸²à¸£â€
à¹€à¸¥à¸·à¸­à¸à¹„à¸Ÿà¸¥à¹Œà¸ˆà¸²à¸à¹€à¸„à¸£à¸·à¹ˆà¸­à¸‡à¸„à¸­à¸¡à¸à¸´à¸§à¹€à¸•à¸­à¸£à¹Œ
à¸à¸£à¸­à¸à¸‚à¹‰à¸­à¸¡à¸¹à¸¥à¸›à¸£à¸°à¸à¸­à¸š à¹€à¸Šà¹ˆà¸™ à¸Šà¸·à¹ˆà¸­à¹€à¸­à¸à¸ªà¸²à¸£ à¸«à¸¡à¸§à¸”à¸«à¸¡à¸¹à¹ˆ à¹à¸—à¹‡à¸
à¸à¸”à¸›à¸¸à¹ˆà¸¡ â€œà¸­à¸±à¸›à¹‚à¸«à¸¥à¸”â€
à¸£à¸°à¸šà¸šà¸šà¸±à¸™à¸—à¸¶à¸à¹€à¸­à¸à¸ªà¸²à¸£à¹à¸¥à¸°à¹à¸ªà¸”à¸‡à¸œà¸¥à¸à¸²à¸£à¸­à¸±à¸›à¹‚à¸«à¸¥à¸”à¸ªà¸³à¹€à¸£à¹‡à¸ˆ

Postconditions: à¹€à¸­à¸à¸ªà¸²à¸£à¸–à¸¹à¸à¸ˆà¸±à¸”à¹€à¸à¹‡à¸šà¹ƒà¸™à¸£à¸°à¸šà¸šà¹à¸¥à¸°à¸ªà¸²à¸¡à¸²à¸£à¸–à¸„à¹‰à¸™à¸«à¸²à¹„à¸”à¹‰

#### ğŸ“˜ Use Case: Assign Users to Document

Actor: à¸à¸™à¸±à¸à¸‡à¸²à¸™à¸„à¸§à¸šà¸„à¸¸à¸¡à¹€à¸­à¸à¸ªà¸²à¸£ (Document Control)
Description: à¸à¸™à¸±à¸à¸‡à¸²à¸™à¸„à¸§à¸šà¸„à¸¸à¸¡à¹€à¸­à¸à¸ªà¸²à¸£à¸ªà¸²à¸¡à¸²à¸£à¸– à¸¡à¸­à¸šà¸«à¸¡à¸²à¸¢à¸‡à¸²à¸™à¹ƒà¸«à¹‰à¸à¸±à¸š Users
Preconditions: à¸à¸™à¸±à¸à¸‡à¸²à¸™à¸„à¸§à¸šà¸„à¸¸à¸¡à¹€à¸­à¸à¸ªà¸²à¸£à¸•à¹‰à¸­à¸‡à¹€à¸‚à¹‰à¸²à¸ªà¸¹à¹ˆà¸£à¸°à¸šà¸šà¸à¹ˆà¸­à¸™, à¹€à¸­à¸à¸ªà¸²à¸£à¸•à¹‰à¸­à¸‡à¸­à¸±à¸›à¹‚à¸«à¸¥à¸”à¹€à¸£à¸µà¸¢à¸šà¸£à¹‰à¸­à¸¢à¹à¸¥à¹‰à¸§
Main Flow:

à¸à¸™à¸±à¸à¸‡à¸²à¸™à¸„à¸§à¸šà¸„à¸¸à¸¡à¹€à¸­à¸à¸ªà¸²à¸£à¹€à¸¥à¸·à¸­à¸à¹€à¸¡à¸™à¸¹ â€œà¸¡à¸­à¸šà¸«à¸¡à¸²à¸¢à¸‡à¸²à¸™â€
à¹€à¸¥à¸·à¸­à¸à¹€à¸­à¸à¸ªà¸²à¸£à¹ƒà¸™à¸£à¸°à¸šà¸š
à¹€à¸¥à¸·à¸­à¸ Users à¸à¸³à¸«à¸™à¸”à¸§à¸±à¸™à¸ªà¸´à¹‰à¸™à¸ªà¸¸à¸”à¸‡à¸²à¸™
à¸à¸”à¸›à¸¸à¹ˆà¸¡ â€œà¸¡à¸­à¸šà¸«à¸¡à¸²à¸¢à¸‡à¸²à¸™â€
à¸£à¸°à¸šà¸šà¸šà¸±à¸™à¸—à¸¶à¸à¹€à¸­à¸à¸ªà¸²à¸£à¹à¸¥à¸°à¹à¸ªà¸”à¸‡à¸œà¸¥à¸à¸²à¸£à¸¡à¸­à¸šà¸«à¸¡à¸²à¸¢à¸‡à¸²à¸™à¸ªà¸³à¹€à¸£à¹‡à¸ˆ

Postconditions: à¸‡à¸²à¸™à¸—à¸µà¹ˆà¸¡à¸­à¸¢à¸«à¸¡à¸²à¸¢ à¸ˆà¸±à¸”à¹€à¸à¹‡à¸šà¹ƒà¸™à¸£à¸°à¸šà¸šà¹à¸¥à¸°à¸ªà¸²à¸¡à¸²à¸£à¸–à¸„à¹‰à¸™à¸«à¸²à¹„à¸”à¹‰

#### ğŸ“˜ Use Case: Search Document

Actor: à¸œà¸¹à¹‰à¹ƒà¸Šà¹‰à¸‡à¸²à¸™à¸—à¸±à¹ˆà¸§à¹„à¸›
Description: à¸œà¸¹à¹‰à¹ƒà¸Šà¹‰à¸‡à¸²à¸™à¸ªà¸²à¸¡à¸²à¸£à¸–à¸„à¹‰à¸™à¸«à¸²à¹€à¸­à¸à¸ªà¸²à¸£à¸ˆà¸²à¸à¸£à¸°à¸šà¸šà¸”à¹‰à¸§à¸¢à¸„à¸³à¸ªà¸³à¸„à¸±à¸à¸«à¸£à¸·à¸­à¸Ÿà¸´à¸¥à¹€à¸•à¸­à¸£à¹Œ
Preconditions: à¸œà¸¹à¹‰à¹ƒà¸Šà¹‰à¸‡à¸²à¸™à¸•à¹‰à¸­à¸‡à¹€à¸‚à¹‰à¸²à¸ªà¸¹à¹ˆà¸£à¸°à¸šà¸š
Main Flow:

à¸œà¸¹à¹‰à¹ƒà¸Šà¹‰à¸‡à¸²à¸™à¸à¸£à¸­à¸à¸„à¸³à¸„à¹‰à¸™à¸«à¸£à¸·à¸­à¹€à¸¥à¸·à¸­à¸à¸Ÿà¸´à¸¥à¹€à¸•à¸­à¸£à¹Œ (à¸«à¸¡à¸§à¸”à¸«à¸¡à¸¹à¹ˆ, à¸§à¸±à¸™à¸—à¸µà¹ˆ, à¸œà¸¹à¹‰à¸ªà¸£à¹‰à¸²à¸‡, à¸œà¸¹à¹‰à¹„à¸”à¹‰à¸£à¸±à¸šà¸¡à¸­à¸šà¸«à¸¡à¸²à¸¢à¸‡à¸²à¸™, à¸ªà¸–à¸²à¸™à¸°, title, subject)
à¸à¸”à¸›à¸¸à¹ˆà¸¡ â€œà¸„à¹‰à¸™à¸«à¸²â€
à¸£à¸°à¸šà¸šà¹à¸ªà¸”à¸‡à¸£à¸²à¸¢à¸à¸²à¸£à¹€à¸­à¸à¸ªà¸²à¸£à¸—à¸µà¹ˆà¸•à¸£à¸‡à¸à¸±à¸šà¹€à¸‡à¸·à¹ˆà¸­à¸™à¹„à¸‚

Postconditions: à¸œà¸¹à¹‰à¹ƒà¸Šà¹‰à¸‡à¸²à¸™à¸ªà¸²à¸¡à¸²à¸£à¸–à¹€à¸›à¸´à¸”à¸”à¸¹à¸«à¸£à¸·à¸­à¸”à¸²à¸§à¸™à¹Œà¹‚à¸«à¸¥à¸”à¹€à¸­à¸à¸ªà¸²à¸£à¸—à¸µà¹ˆà¸„à¹‰à¸™à¸à¸šà¹„à¸”à¹‰

#### ğŸ“˜ Use Case: Manage Access

Actor: à¸œà¸¹à¹‰à¸”à¸¹à¹à¸¥à¸£à¸°à¸šà¸šà¹‚à¸„à¸£à¸‡à¸à¸²à¸£ (superadmin) / à¸œà¸¹à¹‰à¸”à¸¹à¹à¸¥à¸£à¸°à¸šà¸šà¸‚à¸­à¸‡à¸­à¸‡à¸„à¹Œà¸à¸£ (admin)
Description: à¸œà¸¹à¹‰à¸”à¸¹à¹à¸¥à¸£à¸°à¸šà¸šà¸ªà¸²à¸¡à¸²à¸£à¸–à¸à¸³à¸«à¸™à¸”à¸ªà¸´à¸—à¸˜à¸´à¹Œà¸à¸²à¸£à¹€à¸‚à¹‰à¸²à¸–à¸¶à¸‡à¹€à¸­à¸à¸ªà¸²à¸£à¹ƒà¸«à¹‰à¸à¸±à¸šà¸œà¸¹à¹‰à¹ƒà¸Šà¹‰à¸‡à¸²à¸™
Preconditions: à¸œà¸¹à¹‰à¸”à¸¹à¹à¸¥à¸£à¸°à¸šà¸šà¸•à¹‰à¸­à¸‡à¹€à¸‚à¹‰à¸²à¸ªà¸¹à¹ˆà¸£à¸°à¸šà¸š
Main Flow:

à¸œà¸¹à¹‰à¸”à¸¹à¹à¸¥à¸£à¸°à¸šà¸šà¹€à¸¥à¸·à¸­à¸à¹€à¸­à¸à¸ªà¸²à¸£
à¸à¸” â€œà¸ˆà¸±à¸”à¸à¸²à¸£à¸ªà¸´à¸—à¸˜à¸´à¹Œâ€
à¹€à¸¥à¸·à¸­à¸à¸œà¸¹à¹‰à¹ƒà¸Šà¹‰à¸‡à¸²à¸™à¹à¸¥à¸°à¸à¸³à¸«à¸™à¸”à¸ªà¸´à¸—à¸˜à¸´à¹Œ (à¸­à¹ˆà¸²à¸™, à¹à¸à¹‰à¹„à¸‚, à¸¥à¸š)
à¸à¸” â€œà¸šà¸±à¸™à¸—à¸¶à¸â€

Postconditions: à¸ªà¸´à¸—à¸˜à¸´à¹Œà¸à¸²à¸£à¹€à¸‚à¹‰à¸²à¸–à¸¶à¸‡à¹€à¸­à¸à¸ªà¸²à¸£à¸–à¸¹à¸à¸›à¸£à¸±à¸šà¸•à¸²à¸¡à¸—à¸µà¹ˆà¸à¸³à¸«à¸™à¸”

#### ğŸ“˜ Use Case: View Document History

Actor: à¸œà¸¹à¹‰à¹ƒà¸Šà¹‰à¸‡à¸²à¸™à¸—à¸±à¹ˆà¸§à¹„à¸› / à¸œà¸¹à¹‰à¸”à¸¹à¹à¸¥à¸£à¸°à¸šà¸š
Description: à¸œà¸¹à¹‰à¹ƒà¸Šà¹‰à¸‡à¸²à¸™à¸ªà¸²à¸¡à¸²à¸£à¸–à¸”à¸¹à¸›à¸£à¸°à¸§à¸±à¸•à¸´à¸à¸²à¸£à¹ƒà¸Šà¹‰à¸‡à¸²à¸™à¹€à¸­à¸à¸ªà¸²à¸£ à¹€à¸Šà¹ˆà¸™ à¸à¸²à¸£à¹à¸à¹‰à¹„à¸‚ à¸à¸²à¸£à¸”à¸²à¸§à¸™à¹Œà¹‚à¸«à¸¥à¸”
Preconditions: à¸œà¸¹à¹‰à¹ƒà¸Šà¹‰à¸‡à¸²à¸™à¸•à¹‰à¸­à¸‡à¸¡à¸µà¸ªà¸´à¸—à¸˜à¸´à¹Œà¹€à¸‚à¹‰à¸²à¸–à¸¶à¸‡à¹€à¸­à¸à¸ªà¸²à¸£
Main Flow:

à¸œà¸¹à¹‰à¹ƒà¸Šà¹‰à¸‡à¸²à¸™à¹€à¸›à¸´à¸”à¹€à¸­à¸à¸ªà¸²à¸£
à¹€à¸¥à¸·à¸­à¸ â€œà¸”à¸¹à¸›à¸£à¸°à¸§à¸±à¸•à¸´â€
à¸£à¸°à¸šà¸šà¹à¸ªà¸”à¸‡à¸£à¸²à¸¢à¸à¸²à¸£à¸à¸´à¸ˆà¸à¸£à¸£à¸¡à¸—à¸µà¹ˆà¹€à¸à¸µà¹ˆà¸¢à¸§à¸‚à¹‰à¸­à¸‡à¸à¸±à¸šà¹€à¸­à¸à¸ªà¸²à¸£

Postconditions: à¸œà¸¹à¹‰à¹ƒà¸Šà¹‰à¸‡à¸²à¸™à¸ªà¸²à¸¡à¸²à¸£à¸–à¸•à¸£à¸§à¸ˆà¸ªà¸­à¸šà¸à¸²à¸£à¹€à¸›à¸¥à¸µà¹ˆà¸¢à¸™à¹à¸›à¸¥à¸‡à¸¢à¹‰à¸­à¸™à¸«à¸¥à¸±à¸‡à¹„à¸”à¹‰

### ğŸ”„ 0.7 Workflow à¸­à¸±à¸•à¹‚à¸™à¸¡à¸±à¸•à¸´à¹ƒà¸™à¸£à¸°à¸šà¸š DMS

âœ… à¸›à¸£à¸°à¹‚à¸¢à¸Šà¸™à¹Œà¸‚à¸­à¸‡ Workflow à¸­à¸±à¸•à¹‚à¸™à¸¡à¸±à¸•à¸´à¹ƒà¸™ DMS

- à¸¥à¸”à¸ à¸²à¸£à¸°à¸‡à¸²à¸™à¸‹à¹‰à¸³ à¹† à¸‚à¸­à¸‡à¸œà¸¹à¹‰à¹ƒà¸Šà¹‰à¸‡à¸²à¸™
- à¹€à¸à¸´à¹ˆà¸¡à¸„à¸§à¸²à¸¡à¸›à¸¥à¸­à¸”à¸ à¸±à¸¢à¹à¸¥à¸°à¸à¸²à¸£à¸„à¸§à¸šà¸„à¸¸à¸¡à¹€à¸­à¸à¸ªà¸²à¸£
- à¹€à¸à¸´à¹ˆà¸¡à¸„à¸§à¸²à¸¡à¹€à¸£à¹‡à¸§à¹ƒà¸™à¸à¸²à¸£à¸”à¸³à¹€à¸™à¸´à¸™à¸‡à¸²à¸™
- à¸¥à¸”à¸‚à¹‰à¸­à¸œà¸´à¸”à¸à¸¥à¸²à¸”à¸ˆà¸²à¸à¸à¸²à¸£à¸—à¸³à¸‡à¸²à¸™à¸”à¹‰à¸§à¸¢à¸¡à¸·à¸­

#### ğŸ§© Workflow: 1. Document treat Workflow

à¸à¸£à¸“à¸µ: à¹€à¸¡à¸·à¹ˆà¸­à¸¡à¸µà¸à¸²à¸£à¸­à¸±à¸›à¹‚à¸«à¸¥à¸”à¹€à¸­à¸à¸ªà¸²à¸£à¸•à¹‰à¸­à¸‡à¹„à¸”à¹‰à¸£à¸±à¸šà¸à¸²à¸£à¸¡à¸­à¸šà¸«à¸¡à¸²à¸¢à¸‡à¸²à¸™à¹ƒà¸«à¹‰à¸à¸±à¸š à¸à¸™à¸±à¸à¸‡à¸²à¸™à¸ à¸²à¸¢à¹ƒà¸™à¸­à¸‡à¸„à¹Œà¸à¸£à¸“à¹Œ
à¸‚à¸±à¹‰à¸™à¸•à¸­à¸™à¸­à¸±à¸•à¹‚à¸™à¸¡à¸±à¸•à¸´:

1. à¸œà¸¹à¹‰à¹ƒà¸Šà¹‰à¸‡à¸²à¸™à¸­à¸±à¸›à¹‚à¸«à¸¥à¸”à¹€à¸­à¸à¸ªà¸²à¸£à¹à¸¥à¸°à¹€à¸¥à¸·à¸­à¸ â€œà¸¡à¸­à¸šà¸«à¸¡à¸²à¸¢à¸‡à¸²à¸™â€
2. à¸£à¸°à¸šà¸šà¸ªà¹ˆà¸‡à¹à¸ˆà¹‰à¸‡à¹€à¸•à¸·à¸­à¸™à¹„à¸›à¸¢à¸±à¸‡à¸œà¸¹à¹‰à¹„à¸”à¹‰à¸£à¸±à¸šà¸¡à¸­à¸šà¸«à¸¡à¸²à¸¢à¸‡à¸²à¸™
3. à¸œà¸¹à¹‰à¸­à¸™à¸¸à¸¡à¸±à¸•à¸´à¸ªà¸²à¸¡à¸²à¸£à¸–à¸•à¸£à¸§à¸ˆà¸ªà¸­à¸šà¹à¸¥à¸°à¸à¸” â€œà¸•à¸£à¸§à¸ˆà¸ªà¸­à¸šà¹à¸¥à¹‰à¸§â€
4. à¸£à¸°à¸šà¸šà¸šà¸±à¸™à¸—à¸¶à¸à¸ªà¸–à¸²à¸™à¸°à¹€à¸­à¸à¸ªà¸²à¸£à¹à¸¥à¸° à¸ªà¹ˆà¸‡à¸•à¹ˆà¸­ à¹„à¸›à¸¢à¸±à¸‡ à¸­à¸‡à¸à¸£à¸“à¸·à¸­à¸·à¹ˆà¸™ à¸•à¸²à¸¡à¸¥à¸³à¸”à¸±à¸š à¹€à¸¡à¸·à¹ˆà¸­à¹„à¸”à¹‰à¸œà¸¥à¹à¸¥à¸°à¸ˆà¸±à¸”à¸—à¸³à¹€à¸­à¸à¸ªà¸²à¸£à¸•à¸­à¸šà¹à¸¥à¹‰à¸§ à¸ˆà¸¶à¸‡à¹à¸ˆà¹‰à¸‡à¸œà¸¥à¸à¸¥à¸±à¸šà¹„à¸›à¸¢à¸±à¸‡à¸œà¸¹à¹‰à¸ªà¹ˆà¸‡

#### ğŸ“¥ Workflow: 2. Auto Tagging & Categorization

à¸à¸£à¸“à¸µ: à¹€à¸­à¸à¸ªà¸²à¸£à¸—à¸µà¹ˆà¸­à¸±à¸›à¹‚à¸«à¸¥à¸”à¸¡à¸µà¸Šà¸·à¹ˆà¸­à¸«à¸£à¸·à¸­à¹€à¸™à¸·à¹‰à¸­à¸«à¸²à¸—à¸µà¹ˆà¸•à¸£à¸‡à¸à¸±à¸šà¸«à¸¡à¸§à¸”à¸«à¸¡à¸¹à¹ˆà¸—à¸µà¹ˆà¸à¸³à¸«à¸™à¸”à¹„à¸§à¹‰
à¸‚à¸±à¹‰à¸™à¸•à¸­à¸™à¸­à¸±à¸•à¹‚à¸™à¸¡à¸±à¸•à¸´:

à¹€à¸¡à¸·à¹ˆà¸­à¸­à¸±à¸›à¹‚à¸«à¸¥à¸”à¹€à¸­à¸à¸ªà¸²à¸£ à¸£à¸°à¸šà¸šà¸§à¸´à¹€à¸„à¸£à¸²à¸°à¸«à¹Œà¸Šà¸·à¹ˆà¸­à¹„à¸Ÿà¸¥à¹Œà¸«à¸£à¸·à¸­à¹€à¸™à¸·à¹‰à¸­à¸«à¸²
à¸£à¸°à¸šà¸šà¸à¸³à¸«à¸™à¸”à¸«à¸¡à¸§à¸”à¸«à¸¡à¸¹à¹ˆà¹à¸¥à¸°à¹à¸—à¹‡à¸à¹ƒà¸«à¹‰à¹‚à¸”à¸¢à¸­à¸±à¸•à¹‚à¸™à¸¡à¸±à¸•à¸´ à¹€à¸Šà¹ˆà¸™ â€œà¹ƒà¸šà¹€à¸ªà¸™à¸­à¸£à¸²à¸„à¸²â€ â†’ à¸«à¸¡à¸§à¸” â€œà¸à¸²à¸£à¹€à¸‡à¸´à¸™â€
à¸œà¸¹à¹‰à¹ƒà¸Šà¹‰à¸‡à¸²à¸™à¸ªà¸²à¸¡à¸²à¸£à¸–à¹à¸à¹‰à¹„à¸‚à¹„à¸”à¹‰à¸«à¸²à¸à¸•à¹‰à¸­à¸‡à¸à¸²à¸£

#### ğŸ” Workflow: 3. Access Control Workflow

à¸à¸£à¸“à¸µ: à¹€à¸­à¸à¸ªà¸²à¸£à¸—à¸µà¹ˆà¸¡à¸µà¸„à¸§à¸²à¸¡à¸¥à¸±à¸šà¸ªà¸¹à¸‡à¸•à¹‰à¸­à¸‡à¸ˆà¸³à¸à¸±à¸”à¸à¸²à¸£à¹€à¸‚à¹‰à¸²à¸–à¸¶à¸‡
à¸‚à¸±à¹‰à¸™à¸•à¸­à¸™à¸­à¸±à¸•à¹‚à¸™à¸¡à¸±à¸•à¸´:

à¹€à¸¡à¸·à¹ˆà¸­à¸­à¸±à¸›à¹‚à¸«à¸¥à¸”à¹€à¸­à¸à¸ªà¸²à¸£à¸—à¸µà¹ˆà¸¡à¸µà¸„à¸³à¸§à¹ˆà¸² â€œà¸¥à¸±à¸šâ€ à¸«à¸£à¸·à¸­ â€œConfidentialâ€
à¸£à¸°à¸šà¸šà¸à¸³à¸«à¸™à¸”à¸ªà¸´à¸—à¸˜à¸´à¹Œà¹€à¸£à¸´à¹ˆà¸¡à¸•à¹‰à¸™à¹ƒà¸«à¹‰à¹€à¸‰à¸à¸²à¸°à¸œà¸¹à¹‰à¹ƒà¸Šà¹‰à¸‡à¸²à¸™à¸£à¸°à¸”à¸±à¸šà¸œà¸¹à¹‰à¸ˆà¸±à¸”à¸à¸²à¸£à¸‚à¸¶à¹‰à¸™à¹„à¸›
à¸£à¸°à¸šà¸šà¹à¸ˆà¹‰à¸‡à¹€à¸•à¸·à¸­à¸™à¸œà¸¹à¹‰à¸”à¸¹à¹à¸¥à¸£à¸°à¸šà¸šà¹ƒà¸«à¹‰à¸•à¸£à¸§à¸ˆà¸ªà¸­à¸šà¸ªà¸´à¸—à¸˜à¸´à¹Œà¹€à¸à¸´à¹ˆà¸¡à¹€à¸•à¸´à¸¡

#### ğŸ“¤ Workflow: 4. Expiry & Archiving Workflow

à¸à¸£à¸“à¸µ: à¹€à¸­à¸à¸ªà¸²à¸£à¸—à¸µà¹ˆà¸¡à¸µà¸­à¸²à¸¢à¸¸à¸à¸²à¸£à¹ƒà¸Šà¹‰à¸‡à¸²à¸™ à¹€à¸Šà¹ˆà¸™ à¸ªà¸±à¸à¸à¸² à¸«à¸£à¸·à¸­à¹ƒà¸šà¸­à¸™à¸¸à¸à¸²à¸•
à¸‚à¸±à¹‰à¸™à¸•à¸­à¸™à¸­à¸±à¸•à¹‚à¸™à¸¡à¸±à¸•à¸´:

à¹€à¸¡à¸·à¹ˆà¸­à¸­à¸±à¸›à¹‚à¸«à¸¥à¸”à¹€à¸­à¸à¸ªà¸²à¸£ à¸œà¸¹à¹‰à¹ƒà¸Šà¹‰à¸‡à¸²à¸™à¸£à¸°à¸šà¸¸à¸§à¸±à¸™à¸«à¸¡à¸”à¸­à¸²à¸¢à¸¸
à¸£à¸°à¸šà¸šà¹à¸ˆà¹‰à¸‡à¹€à¸•à¸·à¸­à¸™à¸à¹ˆà¸­à¸™à¸«à¸¡à¸”à¸­à¸²à¸¢à¸¸à¸¥à¹ˆà¸§à¸‡à¸«à¸™à¹‰à¸² à¹€à¸Šà¹ˆà¸™ 30 à¸§à¸±à¸™
à¹€à¸¡à¸·à¹ˆà¸­à¸–à¸¶à¸‡à¸§à¸±à¸™à¸«à¸¡à¸”à¸­à¸²à¸¢à¸¸ à¸£à¸°à¸šà¸šà¸¢à¹‰à¸²à¸¢à¹€à¸­à¸à¸ªà¸²à¸£à¹„à¸›à¸¢à¸±à¸‡à¸«à¸¡à¸§à¸” â€œArchiveâ€ à¹‚à¸”à¸¢à¸­à¸±à¸•à¹‚à¸™à¸¡à¸±à¸•à¸´

#### ğŸ“Š Workflow: 5. Audit Trail & Notification Workflow

à¸à¸£à¸“à¸µ: à¸¡à¸µà¸à¸²à¸£à¹à¸à¹‰à¹„à¸‚à¸«à¸£à¸·à¸­à¸”à¸²à¸§à¸™à¹Œà¹‚à¸«à¸¥à¸”à¹€à¸­à¸à¸ªà¸²à¸£à¸ªà¸³à¸„à¸±à¸
à¸‚à¸±à¹‰à¸™à¸•à¸­à¸™à¸­à¸±à¸•à¹‚à¸™à¸¡à¸±à¸•à¸´:

à¸—à¸¸à¸à¸à¸²à¸£à¸à¸£à¸°à¸—à¸³à¸à¸±à¸šà¹€à¸­à¸à¸ªà¸²à¸£ (à¹€à¸›à¸´à¸”, à¹à¸à¹‰à¹„à¸‚, à¸¥à¸š) à¸ˆà¸°à¸–à¸¹à¸à¸šà¸±à¸™à¸—à¸¶à¸à¹ƒà¸™ Audit Log
à¸«à¸²à¸à¹€à¸­à¸à¸ªà¸²à¸£à¸–à¸¹à¸à¹à¸à¹‰à¹„à¸‚à¹‚à¸”à¸¢à¸œà¸¹à¹‰à¹ƒà¸Šà¹‰à¸‡à¸²à¸™à¸—à¸µà¹ˆà¹„à¸¡à¹ˆà¹ƒà¸Šà¹ˆà¹€à¸ˆà¹‰à¸²à¸‚à¸­à¸‡ à¸£à¸°à¸šà¸šà¹à¸ˆà¹‰à¸‡à¹€à¸•à¸·à¸­à¸™à¹€à¸ˆà¹‰à¸²à¸‚à¸­à¸‡à¹€à¸­à¸à¸ªà¸²à¸£à¸—à¸±à¸™à¸—à¸µ

## ğŸ› ï¸ 1. DMS Architecture Deep Dive (Backend + Frontend)

### 1.1 Executive Summary

- Reverse proxy (Nginx/NPM) à¹€à¸œà¸¢à¹à¸à¸£à¹ˆ Frontend (Next.js) à¹à¸¥à¸° Backend (Node.js/Express) à¸œà¹ˆà¸²à¸™ HTTPS (HSTS)
- Backend à¹€à¸Šà¸·à¹ˆà¸­à¸¡ MariaDB 10.11 (à¸‚à¹‰à¸­à¸¡à¸¹à¸¥à¸«à¸¥à¸±à¸ DMS) à¹à¸¥à¸°à¹à¸¢à¸ n8n + Postgres 16 à¸ªà¸³à¸«à¸£à¸±à¸š workflow
- RBAC/ABAC à¸–à¸¹à¸à¸šà¸±à¸‡à¸„à¸±à¸šà¹ƒà¸Šà¹‰à¸‡à¸²à¸™à¹ƒà¸™ middleware + à¸¡à¸µà¸Šà¸¸à¸” SQL (tables â†’ triggers â†’ procedures â†’ views â†’ seed)
- à¹„à¸Ÿà¸¥à¹Œà¸ˆà¸£à¸´à¸‡ (PDF/DWG) à¹€à¸à¹‡à¸šà¸™à¸­à¸ webroot à¸—à¸µà¹ˆ /share/dmsâ€‘data à¸à¸£à¹‰à¸­à¸¡à¸¡à¸²à¸•à¸£à¸à¸²à¸™à¸à¸²à¸£à¸•à¸±à¹‰à¸‡à¸Šà¸·à¹ˆà¸­+à¹‚à¸Ÿà¸¥à¹€à¸”à¸­à¸£à¹Œ
- Dev/Prod à¹à¸¢à¸à¸Šà¸±à¸”à¹€à¸ˆà¸™à¸œà¹ˆà¸²à¸™ Docker multiâ€‘stage + dockerâ€‘compose + à¹‚à¸Ÿà¸¥à¹€à¸”à¸­à¸£à¹Œ persist logs/config/certs

### 1.2 Runtime Topology & Trust Boundaries

```text
Internet Clients (Browser)
    â”‚   HTTPS 443 (HSTS)  [QNAP mgmt = 8443]
    â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Reverse Proxy Layer                                 â”‚
â”‚  â”œâ”€ Nginx (Alpine)  or  Nginx Proxy Manager (NPM)   â”‚
â”‚  â”œâ”€ TLS (LE cert; SAN multiâ€‘subdomain)              â”‚
â”‚  â””â”€ Routes:                                         â”‚
â”‚     â€¢ /, /_next/*   â†’ Frontend (Next.js :3000)      â”‚
â”‚     â€¢ /api/*        â†’ Backend (Express :3001)       â”‚
â”‚     â€¢ /pma/*        â†’ phpMyAdmin                    â”‚
â”‚     â€¢ /n8n/*        â†’ n8n (Workflows)               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
               â”‚                         â”‚
               â”‚                         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
               â–¼                                    â”‚
         Frontend (Next.js)                         â”‚
               â”‚  Cookie-based Auth (HttpOnly)      â”‚
               â–¼                                    â–¼
         Backend (Node/Express ESM)  â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º  MariaDB 10.11
               â”‚                                    â”‚
               â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
               Project data (.pdf/.dwg) @ /share/dms-data

         n8n (workflows) â”€â”€â–º Postgres 16  (separate DB for automations)
```

==Trust Boundaries==

- Public zone: Internet â†” Reverse proxy
- App zone: Reverse proxy â†” FE/BE containers (internal Docker network)
- # Data zone: Backend â†” Databases (MariaDB, Postgres) + /share/dms-data

### 1.3 Frontend: Next.js (ESM) / React.js

#### 1.3.1 Stack & Key libs

- Next.js (App Router), React, ESM
- Tailwind CSS, PostCSS, shadcn/ui (components.json)
- Fetch API (credentials include) â†’ Cookie Auth (HttpOnly)

#### 1.3.2 Directory Layout

```text
/frontend/
â”œâ”€ app/
â”‚  â”œâ”€ login/
â”‚  â”œâ”€ dashboard/
â”‚  â”œâ”€ users/
â”‚  â”œâ”€ correspondences/
â”‚  â”œâ”€ health/
â”‚  â””â”€ layout.tsx / page.tsx (à¸•à¸²à¸¡ App Router)
â”œâ”€ public/
â”œâ”€ Dockerfile (multi-stage: dev/prod)
â”œâ”€ package.json
â”œâ”€ next.config.js
â””â”€ ...
```

#### 1.3.3 Routing & Layouts

- Public /login, /health
- Protected: /dashboard, /users, /correspondences, ... (client-side guard)
- à¹€à¸à¹‡à¸š middleware.ts (à¸‚à¸­à¸‡à¹€à¸”à¸´à¸¡) à¹€à¸à¸·à¹ˆà¸­à¸«à¸¥à¸µà¸à¹€à¸¥à¸µà¹ˆà¸¢à¸‡ regression; à¹ƒà¸Šà¹‰ clientâ€‘guard + server action à¸­à¸¢à¹ˆà¸²à¸‡à¸£à¸°à¸¡à¸±à¸”à¸£à¸°à¸§à¸±à¸‡

#### 1.3.4 Auth Flow (Cookie-based)

1. à¸œà¸¹à¹‰à¹ƒà¸Šà¹‰ submit form /login â†’ POST /api/auth/login (Backend)
2. Backend set HttpOnly cookie (JWT) + SameSite=Lax/Strict, Secure
3. à¸«à¸™à¹‰à¸² protected à¹€à¸£à¸µà¸¢à¸ GET /api/auth/me à¹€à¸à¸·à¹ˆà¸­à¸•à¸£à¸§à¸ˆà¸ªà¸­à¸šà¸ªà¸–à¸²à¸™à¸°
4. à¸«à¸²à¸ 401 â†’ redirect â†’ /login

**CORS/Fetch**: à¹€à¹€à¸›à¸´à¸” credentials: 'include' à¸—à¸¸à¸à¸„à¸£à¸±à¹‰à¸‡, à¸•à¸±à¹‰à¸‡ NEXT_PUBLIC_API_BASE à¹€à¸›à¹‡à¸™ origin à¸‚à¸­à¸‡ backend à¸œà¹ˆà¸²à¸™ proxy (à¹€à¸Šà¹ˆà¸™ https://lcbp3.np-dms.work)

#### 1.3.5 UI/UX

- Seaâ€‘blue palette, sidebar à¸à¸±à¸šà¹„à¸”à¹‰, cardâ€‘based KPI
- à¸•à¸²à¸£à¸²à¸‡à¸‚à¹‰à¸­à¸¡à¸¹à¸¥à¹€à¸•à¸£à¸µà¸¢à¸¡à¸£à¸­à¸‡à¸£à¸±à¸š serverâ€‘side DataTables\*\*
- shadcn/ui: Button, Card, Badge, Tabs, Dropdown, Tooltip, Switch, etc.

#### 1.3.6 Config & ENV

- NEXT_PUBLIC_API_BAS (ex: https://lcbp3.np-dms.work)
- Build output à¹à¸¢à¸ dev/prod; à¸£à¸°à¸§à¸±à¸‡ EACCES à¸šà¸™ QNAP â†’ à¹ƒà¸Šà¹‰ user node + à¸›à¸£à¸±à¸šà¸ªà¸´à¸—à¸˜à¸´à¹Œà¹‚à¸§à¸¥à¸¸à¹ˆà¸¡ .next/\*

#### 1.3.7 Error Handling & Observability (FE)

- Global error boundary (app router) + toast/alert patterns
- Network layer: à¹à¸¢à¸ handler à¸ªà¸³à¸«à¸£à¸±à¸š 401/403/500 + retry/backoff à¸—à¸µà¹ˆà¸ˆà¸³à¹€à¸›à¹‡à¸™
- Metrics (optional): webâ€‘vitals, UX timing (à¹€à¸à¹‡à¸šà¸à¸±à¹ˆà¸‡ n8n à¸«à¸£à¸·à¸­ simple logging)

---

### 1.4 Backend Architecture (Node.js ESM / Express)

#### 1.4.1 Stack & Structure

- Node 20.x, ESM modules, Express\*\*
- mysql2/promise, jsonwebtoken, cookie-parser, cors, helmet, winston/morgan

```text
/backend/
â”œâ”€ src/
â”‚  â”œâ”€ index.js               # bootstrap server, CORS, cookies, health
â”‚  â”œâ”€ routes/
â”‚  â”‚   â”œâ”€ auth.js            # /api/auth/* (login, me, logout)
â”‚  â”‚   â”œâ”€ users.js           # /api/users/*
â”‚  â”‚   â”œâ”€ correspondences.js # /api/correspondences/*
â”‚  â”‚   â”œâ”€ drawings.js        # /api/drawings/*
â”‚  â”‚   â”œâ”€ rfas.js            # /api/rfas/*
â”‚  â”‚   â””â”€ transmittals.js    # /api/transmittals/*
â”‚  â”œâ”€ middleware/
â”‚  â”‚   â”œâ”€ authGuard.js       # verify JWT from cookie
â”‚  â”‚   â”œâ”€ requirePermission.js# RBAC/ABAC enforcement
â”‚  â”‚   â”œâ”€ errorHandler.js
â”‚  â”‚   â””â”€ requestLogger.js
â”‚  â”œâ”€ db/
â”‚  â”‚   â”œâ”€ pool.js            # createPool, sane defaults
â”‚  â”‚   â””â”€ models/            # query builders (User, Drawing, ...)
â”‚  â”œâ”€ utils/
â”‚  â”‚   â”œâ”€ hash.js (bcrypt/argon2)
â”‚  â”‚   â”œâ”€ jwt.js
â”‚  â”‚   â”œâ”€ pagination.js
â”‚  â”‚   â””â”€ responses.js
â”‚  â””â”€ config/
â”‚      â””â”€ index.js           # env, constants
â”œâ”€ Dockerfile
â””â”€ package.json
```

#### 1.4.2 Request Lifecycle

1. helmet + cors (allow specific origin; credentials true)
2. cookie-parser, json limit (e.g., 2MB)
3. requestLogger â†’ trace + response time
4. Route handler â†’ authGuard (protected) â†’ requirePermission (perâ€‘route) â†’ Controller
5. Error bubbles â†’ errorHandler (JSON shape, status map)

#### 1.4.3 Auth & RBAC/ABAC

- JWT à¹ƒà¸™ HttpOnly cookie; Claims: sub (user_id), roles, exp
- authGuard: à¸•à¸£à¸§à¸ˆ token â†’ à¹à¸™à¸š req.user
- requirePermission: à¹€à¸Šà¹‡à¸„ permission à¸•à¸²à¸¡à¹€à¸ªà¹‰à¸™à¸—à¸²à¸‡/à¸§à¸´à¸˜à¸µ; à¹à¸œà¸™à¸‚à¸¢à¸²à¸¢ ABAC (à¹€à¸Šà¹ˆà¸™ project scope, owner, doc state)
- Roles/Permissions à¸–à¸¹à¸ seed à¹ƒà¸™ SQL; à¸¡à¸µ view à¹€à¸¡à¸—à¸£à¸´à¸à¸‹à¹Œ à¹€à¸à¸·à¹ˆà¸­ debug (à¹€à¸Šà¹ˆà¸™ v_role_permission_matrix)

\*\*à¸•à¸±à¸§à¸­à¸¢à¹ˆà¸²à¸‡ pseudo requirePermission(permission)

```js
export const requirePermission = (perm) => async (req, res, next) => {
  if (!req.user) return res.status(401).json({ error: "Unauthenticated" });
  const ok = await checkPermission(req.user.user_id, perm, req.context);
  if (!ok) return res.status(403).json({ error: "Forbidden" });
  return next();
};
```

#### 1.4.4 Database Access & Pooling

- createPool({ connectionLimit: 10~25, queueLimit: 0, waitForConnections: true })
- à¹ƒà¸Šà¹‰ parameterized queries à¹€à¸ªà¸¡à¸­; à¸›à¸£à¸±à¸š sql_mode à¸—à¸µà¹ˆà¸ˆà¸³à¹€à¸›à¹‡à¸™à¹ƒà¸™ my.cnf

#### 1.4.5 File Storage & Secure Download

- Root: /share/dmsâ€‘data
- à¹‚à¸„à¸£à¸‡à¹‚à¸Ÿà¸¥à¹€à¸”à¸­à¸£à¹Œ: {module}/{yyyy}/{mm}/{entityId}/ + à¸Šà¸·à¹ˆà¸­à¹„à¸Ÿà¸¥à¹Œà¸•à¸²à¸¡à¸¡à¸²à¸•à¸£à¸à¸²à¸™ (à¹€à¸Šà¹ˆà¸™ DRW-code-REV-rev.pdf)
- Endpoint download: à¸•à¸£à¸§à¸ˆà¸ªà¸´à¸—à¸˜à¸´à¹Œ (RBAC/ABAC) â†’ res.sendFile()/stream; à¸›à¹‰à¸­à¸‡à¸à¸±à¸™ path traversal
- MIME allowlist + size limit + virus scan (optional; à¸ à¸²à¸¢à¸«à¸¥à¸±à¸‡)

#### 1.4.6 Health & Readiness

- GET /api/health â†’ { ok: true }
- (optional) /api/ready à¸•à¸£à¸§à¸ˆ DB ping + disk space (dmsâ€‘data)

#### 1.4.7 Config & ENV (BE)

- DB_HOST, DB_PORT, DB_USER, DB_PASS, DB_NAME
- JWT_SECRET, COOKIE_NAME, COOKIE_SAMESITE, COOKIE_SECURE
- CORS_ORIGIN, LOG_LEVEL, APP_BASE_URL
- FILE_ROOT=/share/dms-data

#### 1.4.8 Logging

- Access log (morgan) + App log (winston) â†’ /share/Container/dms/logs/backend/
- à¸£à¸¹à¸›à¹à¸šà¸š JSON (timestamp, level, msg, reqId) + daily rotation (logrotate/containerâ€‘side)

### 1.5 Database (MariaDB 10.11)

#### 1.5.1 Schema Overview (à¸¢à¹ˆà¸­)

- RBAC core: users, roles, permissions, user_roles, role_permissions
- Domain: drawings, contracts, correspondences, rfas, transmittals, organizations, projects, ...
- Audit: audit_logs (à¹à¸œà¸™à¸‚à¸¢à¸²à¸¢), deleted_at (soft delete, à¹à¸œà¸™à¸‡à¸²à¸™)

```text
[users]â”€â”€<user_roles>â”€â”€[roles]â”€â”€<role_permissions>â”€â”€[permissions]
   â”‚
   â””â”€â”€ activities/audit_logs (future expansion)

[drawings]â”€â”€<mapping>â”€â”€[contracts]
[rfas]â”€â”€<links>â”€â”€[drawings]
[correspondences] (internal/external flag)
```

#### 1.5.2 Init SQL Pipeline

1. 01\_\*\_deploy_table_rbac.sql â€” à¸ªà¸£à¹‰à¸²à¸‡à¸•à¸²à¸£à¸²à¸‡à¸«à¸¥à¸±à¸à¸—à¸±à¹‰à¸‡à¸«à¸¡à¸” + RBAC
2. 02\_\*\_triggers.sql â€” à¸šà¸±à¸‡à¸„à¸±à¸š data rules, autoâ€‘audit fields
3. 03\_\*\_procedures_handlers.sql â€” upsert/bulk handlers (à¹€à¸Šà¹ˆà¸™ sp_bulk_import_contract_dwg)
4. 04\_\*\_views.sql â€” à¸£à¸²à¸¢à¸‡à¸²à¸™/à¹€à¸¡à¸—à¸£à¸´à¸à¸‹à¹Œà¸ªà¸´à¸—à¸˜à¸´à¹Œ (v_role_permission_matrix, etc.)
5. 05\_\*\_seed_data.sql â€” à¸„à¹ˆà¸²à¸à¸·à¹‰à¸™à¸à¸²à¸™ domain (project, categories, statuses)
6. 06\_\*\_seed_users.sql â€” à¸šà¸±à¸à¸Šà¸µà¹€à¸£à¸´à¹ˆà¸¡à¸•à¹‰à¸™ (superadmin, editors, viewers)
7. 07\_\*\_seed_contract_dwg.sql â€” à¸‚à¹‰à¸­à¸¡à¸¹à¸¥à¸•à¸±à¸§à¸­à¸¢à¹ˆà¸²à¸‡à¹à¸šà¸šà¸ªà¸±à¸à¸à¸²

#### 1.5.3 Indexing & Performance

- Composite indexes à¸•à¸²à¸¡à¸„à¸­à¸¥à¸±à¸¡à¸™à¹Œ filter/sort (à¹€à¸Šà¹ˆà¸™ (project_id, updated_at DESC))
- Fullâ€‘text index (optional) à¸ªà¸³à¸«à¸£à¸±à¸š advanced search
- Query plan review (EXPLAIN) + à¹€à¸à¸´à¹ˆà¸¡ covering index à¸•à¸²à¸¡à¸£à¸²à¸¢à¸‡à¸²à¸™

#### 1.5.4 MySQL/MariaDB Config (my.cnf â€” à¹à¸™à¸§à¸—à¸²à¸‡)

```conf
[mysqld]
innodb_buffer_pool_size = 4G     # à¸›à¸£à¸±à¸šà¸•à¸²à¸¡ RAM/QNAP
innodb_log_file_size    = 512M
innodb_flush_log_at_trx_commit = 1
max_connections         = 200
sql_mode                = STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION
character-set-server    = utf8mb4
collation-server        = utf8mb4_unicode_ci
```

> à¸›à¸£à¸±à¸šà¸„à¹ˆà¸²à¹ƒà¸«à¹‰à¹€à¸«à¸¡à¸²à¸°à¸à¸±à¸š workload à¸ˆà¸£à¸´à¸‡ + à¹€à¸à¹‰à¸²à¸”à¸¹ IO/CPU à¸‚à¸­à¸‡ QNAP

#### 1.5.5 Backup/Restore

- Logical backup: mysqldump --routines --triggers --single-transaction
- Physical (snapshot QNAP) + schedule à¸œà¹ˆà¸²à¸™ n8n/cron
- à¹€à¸à¹‡à¸šà¸ªà¸³à¹€à¸™à¸² offâ€‘NAS (encrypted)

### 1.6 Reverse Proxy & TLS

#### 1.6.1 Nginx (Alpine) â€” à¸•à¸±à¸§à¸­à¸¢à¹ˆà¸²à¸‡ server block

> à¸ªà¸³à¸„à¸±à¸: à¸šà¸™à¸ªà¸ à¸²à¸à¹à¸§à¸”à¸¥à¹‰à¸­à¸¡à¸™à¸µà¹‰ à¹ƒà¸«à¹‰à¹ƒà¸Šà¹‰à¸„à¸™à¸¥à¸°à¸šà¸£à¸£à¸—à¸±à¸”:  
> listen 443 ssl;
> http2 on;
> à¸«à¸¥à¸µà¸à¹€à¸¥à¸µà¹ˆà¸¢à¸‡ listen 443 ssl http2;

```conf
server {
  listen 80;
  server_name lcbp3.np-dms.work;
  return 301 https://$host$request_uri;
}

server {
  listen 443 ssl;
  http2 on;
  server_name lcbp3.np-dms.work;

  ssl_certificate     /etc/nginx/certs/fullchain.pem;
  ssl_certificate_key /etc/nginx/certs/privkey.pem;
  add_header Strict-Transport-Security "max-age=63072000; preload" always;

  # Frontend
  location / {
    proxy_pass http://frontend:3000;
    proxy_set_header Host $host;
    proxy_set_header X-Real-IP $remote_addr;
    proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
    proxy_set_header X-Forwarded-Proto $scheme;
  }

  # Next.js static
  location /_next/ {
    proxy_pass http://frontend:3000;
  }

  # Backend API
  location /api/ {
    proxy_http_version 1.1;
    proxy_set_header Connection "";
    proxy_pass http://backend:3001;
    proxy_set_header Host $host;
    proxy_set_header X-Real-IP $remote_addr;
    proxy_set_header X-Forwarded-Proto $scheme;
  }

  # phpMyAdmin (sub-path)
  location /pma/ {
    proxy_pass http://phpmyadmin:80/;
  }

  # n8n
  location /n8n/ {
    proxy_pass http://n8n:5678/;
  }
}
```

#### 1.6.2 Nginx Proxy Manager (NPM) â€” Tips

- à¸£à¸°à¸§à¸±à¸‡à¸­à¸¢à¹ˆà¸²à¹ƒà¸ªà¹ˆ proxy_http_version à¸‹à¹‰à¸³à¸‹à¹‰à¸­à¸™ (duplicate directive) à¹ƒà¸™ Advanced
- à¸–à¹‰à¸²à¸•à¹‰à¸­à¸‡à¹à¸à¹‰à¹„à¸Ÿà¸¥à¹Œà¸”à¹‰à¸²à¸™à¹ƒà¸™ NPM â†’ à¸£à¸°à¸§à¸±à¸‡à¹„à¸Ÿà¸¥à¹Œà¹ƒà¸™ /data/nginx/proxy_host/\*.conf
- à¸ˆà¸±à¸”à¸à¸²à¸£ certificate / SAN à¸«à¸¥à¸²à¸¢ subâ€‘domain à¹ƒà¸™ UI à¹à¸•à¹ˆ mainten à¸”à¸µà¹€à¸£à¸·à¹ˆà¸­à¸‡ symlink/renew

#### 1.6.3 TLS & Certificates

- Letâ€™s Encrypt (HTTPâ€‘01 webroot/standalone) + HSTS
- QNAP mgmt à¹€à¸›à¸¥à¸µà¹ˆà¸¢à¸™à¹€à¸›à¹‡à¸™ 8443 â†’ à¸à¸­à¸£à¹Œà¸• 443 public à¸§à¹ˆà¸²à¸‡à¸ªà¸³à¸«à¸£à¸±à¸š Nginx/NPM

### 1.7 Docker Compose Topology

#### 1.7.1 Services (à¸ªà¸£à¸¸à¸›)

- frontend (Next.js) :3000
- backend (Express) :3001
- mariadb (10.11) :3306 (internal)
- phpmyadmin :80 (internal)
- nginx or npm :80/443 (published)
- n8n :5678 (internal)
- postgres_n8n (16-alpine)
- pgadmin4

#### 1.7.2 Volumes & Paths

```text
/share/Container/dms/
â”œâ”€ mariadb/data
â”œâ”€ mariadb/init/*.sql
â”œâ”€ backend/ (code)
â”œâ”€ frontend/ (code)
â”œâ”€ phpmyadmin/{sessions,tmp,config.user.inc.php}
â”œâ”€ nginx/{nginx.conf,dms.conf,certs/}
â”œâ”€ n8n, n8n-postgres, n8n-cache
â””â”€ logs/{backend,frontend,nginx,pgadmin,phpmyadmin,postgres_n8n}
/share/dms-data  (pdf/dwg storage)
```

#### 1.7.3 Healthchecks (suggested)

- backend:

  ```sh
  curl http://localhost:3001/api/health
  ```

- frontend: curl /health (simple JSON)
- mariadb: mysqladmin ping with credentials
- nginx: nginx -t at startup

#### 1.7.4 Security Hardening

- à¸£à¸±à¸™ container à¸”à¹‰à¸§à¸¢ user nonâ€‘root (user: node à¸ªà¸³à¸«à¸£à¸±à¸š FE/BE)
- à¸ˆà¸³à¸à¸±à¸” capabilities; readâ€‘only FS (à¸¢à¸à¹€à¸§à¹‰à¸™à¹‚à¸§à¸¥à¸¸à¹ˆà¸¡à¸ˆà¸³à¹€à¸›à¹‡à¸™)
- à¹€à¸‰à¸à¸²à¸° backend à¹€à¸¡à¸²à¸™à¸•à¹Œ /share/dms-data

### 1.8 Observability, Ops, and Troubleshooting

#### 1.8.1 Logs

- Frontend â†’ /logs/frontend/\*
- Backend â†’ /logs/backend/\* (app/access/error)
- Nginx/NPM â†’ /logs/nginx/\*
- MariaDB â†’ default datadir log + slow query (à¹€à¸›à¸´à¸”à¹ƒà¸™ my.cnf à¸«à¸²à¸à¸•à¹‰à¸­à¸‡à¸à¸²à¸£)

#### 1.8.2 Common Issues & Playbooks

- 401 Unauthenticated: à¸•à¸£à¸§à¸ˆ authGuard â†’ JWT cookie à¸¡à¸µ/à¸«à¸¡à¸”à¸­à¸²à¸¢à¸¸ â†’ à¹€à¸§à¸¥à¸² server/FE sync â†’ CORS credentials: true
- EACCES Next.js: à¸ªà¸´à¸—à¸˜à¸´à¹Œ .next/\* + run as`node, à¹‚à¸§à¸¥à¸¸à¹ˆà¸¡ map à¸–à¸¹à¸ user:group
- NPM duplicate directive: à¸¥à¸šà¸‹à¹‰à¸³ proxy_http_version à¹ƒà¸™ Advanced / à¸•à¸£à¸§à¸ˆ proxy_host/\*.conf
- LE cert path/symlink: à¸•à¸£à¸§à¸ˆ /etc/letsencrypt/live/npm-\* symlink à¸Šà¸µà¹‰à¸–à¸¹à¸
- DB field not found: à¸•à¸£à¸§à¸ˆ schema vs code (migration/init SQL) â†’ sync à¹ƒà¸«à¹‰à¸•à¸£à¸‡

#### 1.8.3 Performance Guides

- Backend: keepâ€‘alive, gzip/deflate at proxy, pool 10â€“25, paginate, avoid N+1
- Frontend: prefetch critical routes, cache static, image optimization
- DB: à¹€à¸à¸´à¹ˆà¸¡ index à¸ˆà¸¸à¸” filter, analyze query (EXPLAIN), à¸›à¸£à¸±à¸š buffer pool

### 1.9 Security & Compliance

- HTTPS only + HSTS (preload)
- CORS: allow list à¹€à¸‰à¸à¸²à¸° FE origin; Access-Control-Allow-Credentials: true
- Cookie: HttpOnly, Secure, SameSite=Lax/Strict
- Input Validation: celebrate/zod (optional) + sanitize
- Rate limiting: per IP/route (optional)
- AuditLog: à¸§à¸²à¸‡à¹à¸œà¸™à¹€à¸à¸´à¹ˆà¸¡ à¸„à¸£à¸­à¸šà¸„à¸¥à¸¸à¸¡ CRUD + mapping (actor, action, entity, before/after)
- Backups: DB + /share/dms-data + config (encrypted offâ€‘NAS)

### 1.10 Backlog â†’ Architecture Mapping

1. RBAC Enforcement à¸„à¸£à¸š â†’ à¹€à¸•à¸´à¸¡ requirePermission à¸—à¸¸à¸ route + test matrix à¸œà¹ˆà¸²à¸™ view
2. AuditLog à¸„à¸£à¸š CRUD/Mapping â†’ trigger + table audit_logs + BE hook
3. Upload/Download à¸ˆà¸£à¸´à¸‡à¸‚à¸­à¸‡ Drawing Revisions â†’ BE endpoints + virus scan (optional)
4. Dashboard KPI â†’ BE summary endpoints + FE cards/charts
5. Serverâ€‘side DataTables â†’ paging/sort/filter + indexesà¸£à¸­à¸‡à¸£à¸±à¸š
6. à¸£à¸²à¸¢à¸‡à¸²à¸™ Export CSV/Excel/PDF â†’ BE export endpoints + FE buttons
7. Soft delete (deleted_at) â†’ BE filter default scope + restore endpoint
8. Validation à¹€à¸‚à¹‰à¸¡ â†’ celebrate/zod schema + consistent error shape
9. Indexing/Perf â†’ slow query log + EXPLAIN review
10. Job/Cron Deadline Alerts â†’ n8n schedule + SMTP

### 1.11 Port & ENV Matrix (Quick Ref)

| Component | Ports | Key ENV |
| Nginx/NPM | 80/443 (public) | SSL paths, HSTS |
| Frontend | 3000 (internal) | NEXT*PUBLIC_API_BASE |
| Backend | 3001 (internal) | DB*\*, JWT*SECRET, CORS_ORIGIN, FILE_ROOT |
| MariaDB | 3306 (internal) | MY_CNF, credentials |
| n8n | 5678 (internal) | N8N*, webhook URL under /n8n/ |
| Postgres | 5432 (internal) | n8n DB |

QNAP mgmt: 8443 (already moved)

### 1.12 Sample Snippets

#### 1.12.1 Backend CORS (credentials)

```js
app.use(
  cors({
    origin: ["https://lcbp3.np-dms.work"],
    credentials: true,
  })
);
```

#### 1.12.2 Secure Download (guarded)

```js
router.get(
  "/files/:module/:id/:filename",
  authGuard,
  requirePermission("file.read"),
  async (req, res) => {
    const { module, id, filename } = req.params;
    // 1) ABAC: verify user can access this module/entity
    const ok = await canReadFile(req.user.user_id, module, id);
    if (!ok) return res.status(403).json({ error: "Forbidden" });

    const abs = path.join(FILE_ROOT, module, id, filename);
    if (!abs.startsWith(FILE_ROOT))
      return res.status(400).json({ error: "Bad path" });
    return res.sendFile(abs);
  }
);
```

#### 1.12.3 Healthcheck

```js
router.get("/health", (req, res) => res.json({ ok: true }));
```

### 13 Deployment Workflow (Suggested)

1. Git (Gitea) branch strategy feature/\* â†’ PR â†’ main
2. Build images (dev/prod) via Dockerfile multiâ€‘stage; pin Node/MariaDB versions
3. docker compose up -d --build à¸ˆà¸²à¸ /share/Container/dms
4. Validate: /health, /api/health, login roundtrip
5. Monitor logs + baseline perf; run SQL smoke tests (views/triggers/procs)

### 14 Appendix

- Naming conventions: snake_case DB, camelCase JS
- Timezones: store UTC in DB; display in app TZ (+07:00)
- Character set: UTFâ€‘8 (utf8mb4_unicode_ci)
- Large file policy: size limit (e.g., 50â€“200MB), allowlist extensions
- Retention: archive strategy for old revisions (optional)

## à¸šà¸—à¸šà¸²à¸—: à¸„à¸¸à¸“à¸„à¸·à¸­ Programmer à¹à¸¥à¸° Document Engineer à¸—à¸µà¹ˆà¹€à¸Šà¸µà¹ˆà¸¢à¸§à¸Šà¸²à¸

1. à¸à¸²à¸£à¸à¸±à¸’à¸™à¸²à¹€à¸§à¹‡à¸šà¹à¸­à¸› (Web Application Development)
2. Configuration of Container Station on QNAP
3. Database: mariadb:10.11
4. Database management: phpmyadmin:5-apache
5. Backend: node:.js (ESM)
6. Frontend: next.js, react
7. Workflow automation: n8n:
8. Workflow database: postgres:16-alpine
9. Workflow database management: pgadmin4
10. Reverse proxy: nginx:1.27-alpine
11. linux on QNAP
12. à¸à¸²à¸£à¸ˆà¸±à¸”à¸à¸²à¸£à¸à¸²à¸™à¸‚à¹‰à¸­à¸¡à¸¹à¸¥ (Database Management)
13. à¸à¸²à¸£à¸§à¸´à¹€à¸„à¸£à¸²à¸°à¸«à¹Œà¸à¸²à¸™à¸‚à¹‰à¸­à¸¡à¸¹à¸¥ (Database Analysis)
14. à¸à¸²à¸£à¸ˆà¸±à¸”à¸à¸²à¸£à¸à¸²à¸™à¸‚à¹‰à¸­à¸¡à¸¹à¸¥à¹€à¸Šà¸´à¸‡à¸ªà¸±à¸¡à¸à¸±à¸™à¸˜à¹Œ (Relational Databases)
15. à¸ à¸²à¸©à¸² SQL
16. RBAC

## 2. à¸£à¸°à¸šà¸šà¸—à¸µà¹ˆà¹ƒà¸Šà¹‰

## Server

- à¹ƒà¸Šà¹‰ Container Station à¹€à¸›à¹‡à¸™ SERVER à¸šà¸™ QNAP (Model: TS-473A, RAM: 32GB, CPU: AMD Ryzen V1500B 4 cores 8 threads) **à¹€à¸›à¸¥à¸µà¹ˆà¸¢à¸™ port 443 à¸‚à¸­à¸‡ QNAP à¹€à¸›à¹‡à¸™ 8443 à¹à¸¥à¹‰à¸§**

## à¸à¸²à¸£à¸à¸±à¸’à¸™à¸²à¹‚à¸„à¸£à¸‡à¸à¸²à¸£

- à¸”à¹‰à¸§à¸¢ Visual Studio Code à¸šà¸™ Windows 11
- à¹ƒà¸Šà¹‰ à¹Š UI à¸‚à¸­à¸‡ Container Station à¹€à¸›à¹‡à¸™à¸«à¸¥à¸±à¸

## à¹‚à¸„à¸£à¸‡à¸ªà¸£à¹‰à¸²à¸‡à¹‚à¸Ÿà¸¥à¹€à¸”à¸­à¸£à¹Œ (à¸šà¸™ QNAP)

/share/Container/dms/
â”œâ”€ docker-compose.yml # Create à¹‚à¸”à¸¢ UI Container Station
â”œâ”€ mariadb/
â”‚ â”œâ”€ data/ # à¸‚à¹‰à¸­à¸¡à¸¹à¸¥à¸ˆà¸£à¸´à¸‡à¸‚à¸­à¸‡ MariaDB
â”‚ â”œâ”€ init/ # à¸‚à¹‰à¸­à¸¡à¸¹à¸¥à¹€à¸£à¸´à¹ˆà¸¡à¸•à¹‰à¸™à¸‚à¸­à¸‡ MariaDB
â”‚ â”‚ â”œâ”€ 01_dms_data_v5_1_deploy_table_rbac.sql # Create all data table & RBAC table here!
â”‚ â”‚ â”œâ”€ 02_dms_data_v5_1_triggers.sql # Create all triggers here!
â”‚ â”‚ â”œâ”€ 03_dms_data_v5_1_procedures_handlers.sql # Create all procedures here!
â”‚ â”‚ â”œâ”€ 04_dms_data_v5_1_views.sql # Create all views here!
â”‚ â”‚ â”œâ”€ 05 dms_data_v5_1_seeà¸_data.sql # Seed nescesary data here!
â”‚ â”‚ â”œâ”€ 06_dms_data_v5_1_seed_users.sql # Seed users data here!
â”‚ â”‚ â””â”€ 07_dms_data_v5_1_seed_contract_dwg.sql # Seed contract drawing data here!
â”‚ â””â”€ my.cnf
â”œâ”€ backend/
â”‚ â”œâ”€ app/
â”‚ â”œâ”€ src/
â”‚ â”‚ â”œâ”€ db/
â”‚ â”‚ â”‚ â””â”€models/
â”‚ â”‚ â”œâ”€ middleware/
â”‚ â”‚ â”œâ”€ routes/
â”‚ â”‚ â”œâ”€ utils/
â”‚ â”‚ â””â”€ index.js
â”‚ â”œâ”€ Dockerfile
â”‚ â”œâ”€ package.json
â”‚ â””â”€ package-lock.json # à¹„à¸¡à¹ˆà¸¡à¸µ
â”œâ”€ frontend/
â”‚ â”œâ”€ app/
â”‚ â”‚ â”œâ”€ correspondences/
â”‚ â”‚ â”œâ”€ dashboard/
â”‚ â”‚ â”œâ”€ health/
â”‚ â”‚ â”œâ”€ login/
â”‚ â”‚ â””â”€ users/
â”‚ â”œâ”€ public/
â”‚ â”œâ”€ Dockerfile
â”‚ â”œâ”€ package.json
â”‚ â”œâ”€ package-lock.json # à¹„à¸¡à¹ˆà¸¡à¸µ
â”‚ â”œâ”€ next.config.js
â”‚ â””â”€ page.jsx
â”œâ”€ phpmyadmin/
â”‚ â”œâ”€ sessions/ # à¹‚à¸Ÿà¸¥à¹€à¸”à¸­à¸£à¹Œà¹€à¸‹à¸ªà¸Šà¸±à¸™à¸–à¸²à¸§à¸£à¸‚à¸­à¸‡ phpMyAdmin
â”‚ â”œâ”€ tmp/
â”‚ â”œâ”€ config.user.inc.php
â”‚ â””â”€ zzz-custom.ini
â”œâ”€ nginx/
â”‚ â”œâ”€ certs/
â”‚ â”œâ”€ nginx.conf
â”‚ â””â”€ dms.conf
â”œâ”€ n8n/
â”œâ”€ n8n-cache/
â”œâ”€ n8n-postgres/
â””â”€ logs/
â”œâ”€ backend/
â”œâ”€ frontend/
â”œâ”€ nginx/
â”œâ”€ pgadmin/
â”œâ”€ phpmyadmin/
â””â”€ postgres_n8n/
/share/dms-data # à¹€à¸à¹‡à¸šà¸‚à¹‰à¸­à¸¡à¸¡à¸¹à¸¥ .pdf, .dwg à¹à¸¢à¸à¸•à¸²à¸¡ correspondences, documents

# à¸‡à¸²à¸™à¸—à¸µà¹ˆà¸•à¹‰à¸­à¸‡à¸à¸²à¸£:

- à¹„à¸¡à¹ˆà¹ƒà¸Šà¹‰ .env à¹€à¸”à¹‡à¸”à¸‚à¸²à¸” Container Station à¹„à¸¡à¹ˆà¸£à¸­à¸‡à¸£à¸±à¸š à¹à¸¥à¸° docker-compose.yml à¹„à¸”à¹‰à¸—à¸”à¸ªà¸­à¸š à¸£à¸±à¸™à¸šà¸™ Container station à¸¡à¸²à¹à¸¥à¹‰à¸§
- Code à¸‚à¸­à¸‡ backend à¸—à¸±à¹‰à¸‡à¸«à¸¡à¸”
- à¸à¸²à¸£à¸—à¸”à¸ªà¸­à¸šà¸£à¸°à¸šà¸š backend à¸—à¸¸à¸à¸ªà¹ˆà¸§à¸™ à¹ƒà¸«à¹‰à¸à¸£à¹‰à¸­à¸¡ à¸ªà¸³à¸«à¸£à¸±à¸š frontend

# à¸à¸£à¸“à¸µ 2: à¸¡à¸µ Git à¸­à¸¢à¸¹à¹ˆà¹à¸¥à¹‰à¸§ (à¸¡à¸µ main à¸­à¸¢à¸¹à¹ˆ)

2.1 à¸­à¸±à¸›à¹€à¸”à¸• main à¹ƒà¸«à¹‰à¸•à¸£à¸‡à¸¥à¹ˆà¸²à¸ªà¸¸à¸”à¸à¹ˆà¸­à¸™à¹à¸•à¸à¸šà¸£à¹‰à¸²à¸™à¸Šà¹Œ

cd /share/Container/dms
git checkout main
git pull --ff-only # à¸–à¹‰à¸²à¹€à¸Šà¸·à¹ˆà¸­à¸¡ remote à¸­à¸¢à¸¹à¹ˆ
git tag -f stable-$(date +%F) # tag à¸ˆà¸¸à¸”à¹€à¸ªà¸–à¸µà¸¢à¸£à¸›à¸±à¸ˆà¸ˆà¸¸à¸šà¸±à¸™

2.2 à¹à¸•à¸ branch à¸‡à¸²à¸™ Dashboard
git checkout -b feature/dashboard-update-$(date +%y%m%d)
git checkout -b feature/dashboard-update-251004

2.3 à¸—à¸³à¸‡à¸²à¸™/à¸„à¸­à¸¡à¸¡à¸´à¸•à¸•à¸²à¸¡à¸›à¸à¸•à¸´

# à¹à¸à¹‰à¹„à¸Ÿà¸¥à¹Œ frontend/app/dashboard/\* à¹à¸¥à¸°à¸—à¸µà¹ˆà¹€à¸à¸µà¹ˆà¸¢à¸§à¸‚à¹‰à¸­à¸‡

git add frontend/app/dashboard
git commit -m "feat(dashboard): à¹€à¸à¸´à¹ˆà¸¡à¸ªà¹ˆà¸§à¸™à¸ˆà¸±à¸”à¸à¸²à¸£ user"
git push -u origin feature/dashboard-update-251004
