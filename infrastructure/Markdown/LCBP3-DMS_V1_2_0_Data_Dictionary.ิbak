# **‡∏™‡∏£‡∏∏‡∏õ‡∏ï‡∏≤‡∏£‡∏≤‡∏á‡∏ê‡∏≤‡∏ô‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏• (Data Dictionary) \- LCBP3-DMS**

‡πÄ‡∏≠‡∏Å‡∏™‡∏≤‡∏£‡∏ô‡∏µ‡πâ‡∏™‡∏£‡∏∏‡∏õ‡πÇ‡∏Ñ‡∏£‡∏á‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏ï‡∏≤‡∏£‡∏≤‡∏á, Foreign Keys (FK), ‡πÅ‡∏•‡∏∞ Constraints ‡∏ó‡∏µ‡πà‡∏™‡∏≥‡∏Ñ‡∏±‡∏ç‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î‡πÉ‡∏ô‡∏ê‡∏≤‡∏ô‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏• LCBP3-DMS (v1.1.1) ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÉ‡∏ä‡πâ‡πÄ‡∏õ‡πá‡∏ô‡πÄ‡∏≠‡∏Å‡∏™‡∏≤‡∏£‡∏≠‡πâ‡∏≤‡∏á‡∏≠‡∏¥‡∏á‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏ó‡∏µ‡∏°‡∏û‡∏±‡∏í‡∏ô‡∏≤ Backend (NestJS) ‡πÅ‡∏•‡∏∞ Frontend (Next.js)

## **1\. üè¢ Core & Master Data (‡∏≠‡∏á‡∏Ñ‡πå‡∏Å‡∏£, ‡πÇ‡∏Ñ‡∏£‡∏á‡∏Å‡∏≤‡∏£, ‡∏™‡∏±‡∏ç‡∏ç‡∏≤)**

#### **1.1. organization\_roles**

‡∏ï‡∏≤‡∏£‡∏≤‡∏á Master ‡πÄ‡∏Å‡πá‡∏ö‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó‡∏ö‡∏ó‡∏ö‡∏≤‡∏ó‡∏Ç‡∏≠‡∏á‡∏≠‡∏á‡∏Ñ‡πå‡∏Å‡∏£ (‡πÄ‡∏ä‡πà‡∏ô OWNER, CONTRACTOR)

| Column | Type | Key | Description |
| :---- | :---- | :---- | :---- |
| id | INT | **PK** | ID ‡∏Ç‡∏≠‡∏á‡∏ï‡∏≤‡∏£‡∏≤‡∏á |
| role\_name | VARCHAR(20) | UK | ‡∏ä‡∏∑‡πà‡∏≠‡∏ö‡∏ó‡∏ö‡∏≤‡∏ó (OWNER, DESIGNER, CONSULTANT, CONTRACTOR, THIRD PARTY) |

* **Unique Keys (UK):** ux\_roles\_name (role\_name)

#### **1.2. organizations**

‡∏ï‡∏≤‡∏£‡∏≤‡∏á Master ‡πÄ‡∏Å‡πá‡∏ö‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏≠‡∏á‡∏Ñ‡πå‡∏Å‡∏£‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î‡∏ó‡∏µ‡πà‡πÄ‡∏Å‡∏µ‡πà‡∏¢‡∏ß‡∏Ç‡πâ‡∏≠‡∏á‡πÉ‡∏ô‡∏£‡∏∞‡∏ö‡∏ö

| Column | Type | Key | Description |
| :---- | :---- | :---- | :---- |
| id | INT | **PK** | ID ‡∏Ç‡∏≠‡∏á‡∏ï‡∏≤‡∏£‡∏≤‡∏á |
| organization\_code | VARCHAR(20) | UK | ‡∏£‡∏´‡∏±‡∏™‡∏≠‡∏á‡∏Ñ‡πå‡∏Å‡∏£ |
| organization\_name | VARCHAR(255) |  | ‡∏ä‡∏∑‡πà‡∏≠‡∏≠‡∏á‡∏Ñ‡πå‡∏Å‡∏£ |
| role\_id | INT | FK | ‡∏ö‡∏ó‡∏ö‡∏≤‡∏ó‡∏Ç‡∏≠‡∏á‡∏≠‡∏á‡∏Ñ‡πå‡∏Å‡∏£ (FK \-\> organization\_roles(id)) |
| is\_active | BOOLEAN |  | ‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡∏Å‡∏≤‡∏£‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô |

* **Foreign Keys (FK):**  
  * role\_id \-\> organization\_roles(id) (ON DELETE SET NULL)  
* **Unique Keys (UK):** ux\_organizations\_code (organization\_code)

#### **1.3. projects**

‡∏ï‡∏≤‡∏£‡∏≤‡∏á Master ‡πÄ‡∏Å‡πá‡∏ö‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÇ‡∏Ñ‡∏£‡∏á‡∏Å‡∏≤‡∏£ (‡πÄ‡∏ä‡πà‡∏ô LCBP3C1, LCBP3C2)

| Column | Type | Key | Description |
| :---- | :---- | :---- | :---- |
| id | INT | **PK** | ID ‡∏Ç‡∏≠‡∏á‡∏ï‡∏≤‡∏£‡∏≤‡∏á |
| project\_code | VARCHAR(50) | UK | ‡∏£‡∏´‡∏±‡∏™‡πÇ‡∏Ñ‡∏£‡∏á‡∏Å‡∏≤‡∏£ |
| project\_name | VARCHAR(255) |  | ‡∏ä‡∏∑‡πà‡∏≠‡πÇ‡∏Ñ‡∏£‡∏á‡∏Å‡∏≤‡∏£ |
| parent\_project\_id | INT | FK | ‡∏£‡∏´‡∏±‡∏™‡πÇ‡∏Ñ‡∏£‡∏á‡∏Å‡∏≤‡∏£‡∏´‡∏•‡∏±‡∏Å (‡∏ñ‡πâ‡∏≤‡∏°‡∏µ) (FK \-\> projects(id)) |
| contractor\_organization\_id | INT | FK | ‡∏£‡∏´‡∏±‡∏™‡∏≠‡∏á‡∏Ñ‡πå‡∏Å‡∏£‡∏ú‡∏π‡πâ‡∏£‡∏±‡∏ö‡πÄ‡∏´‡∏°‡∏≤ (‡∏ñ‡πâ‡∏≤‡∏°‡∏µ) (FK \-\> organizations(id)) |
| is\_active | TINYINT(1) |  | ‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡∏Å‡∏≤‡∏£‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô |

* **Foreign Keys (FK):**  
  * parent\_project\_id \-\> projects(id) (ON DELETE SET NULL)  
  * contractor\_organization\_id \-\> organizations(id) (ON DELETE SET NULL)  
* **Unique Keys (UK):** uq\_pro\_code (project\_code)

#### **1.4. contracts**

‡∏ï‡∏≤‡∏£‡∏≤‡∏á Master ‡πÄ‡∏Å‡πá‡∏ö‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏™‡∏±‡∏ç‡∏ç‡∏≤

| Column | Type | Key | Description |
| :---- | :---- | :---- | :---- |
| id | INT | **PK** | ID ‡∏Ç‡∏≠‡∏á‡∏ï‡∏≤‡∏£‡∏≤‡∏á |
| contract\_code | VARCHAR(50) | UK | ‡∏£‡∏´‡∏±‡∏™‡∏™‡∏±‡∏ç‡∏ç‡∏≤ |
| contract\_name | VARCHAR(255) |  | ‡∏ä‡∏∑‡πà‡∏≠‡∏™‡∏±‡∏ç‡∏ç‡∏≤ |
| description | TEXT |  | ‡∏Ñ‡∏≥‡∏≠‡∏ò‡∏¥‡∏ö‡∏≤‡∏¢‡∏™‡∏±‡∏ç‡∏ç‡∏≤ |

* **Unique Keys (UK):** ux\_contracts\_code (contract\_code)

#### **1.5. project\_parties (‡∏ï‡∏≤‡∏£‡∏≤‡∏á‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°)**

‡∏ï‡∏≤‡∏£‡∏≤‡∏á‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏±‡∏°‡∏û‡∏±‡∏ô‡∏ò‡πå‡∏£‡∏∞‡∏´‡∏ß‡πà‡∏≤‡∏á ‡πÇ‡∏Ñ‡∏£‡∏á‡∏Å‡∏≤‡∏£, ‡∏≠‡∏á‡∏Ñ‡πå‡∏Å‡∏£, ‡πÅ‡∏•‡∏∞‡∏ö‡∏ó‡∏ö‡∏≤‡∏ó (M:N)

| Column | Type | Key | Description |
| :---- | :---- | :---- | :---- |
| project\_id | INT | **PK**, FK | ID ‡∏Ç‡∏≠‡∏á‡πÇ‡∏Ñ‡∏£‡∏á‡∏Å‡∏≤‡∏£ (FK \-\> projects(id)) |
| organization\_id | INT | **PK**, FK | ID ‡∏Ç‡∏≠‡∏á‡∏≠‡∏á‡∏Ñ‡πå‡∏Å‡∏£ (FK \-\> organizations(id)) |
| role | ENUM(...) | **PK** | ‡∏ö‡∏ó‡∏ö‡∏≤‡∏ó‡πÉ‡∏ô‡πÇ‡∏Ñ‡∏£‡∏á‡∏Å‡∏≤‡∏£ (OWNER, DESIGNER, CONSULTANT, CONTRACTOR, THIRD\_PARTY) |
| is\_contractor | TINYINT(1) | UK | (Generated) \= 1 ‡∏ñ‡πâ‡∏≤ role \= 'CONTRACTOR' |

* **Foreign Keys (FK):**  
  * project\_id \-\> projects(id) (ON DELETE CASCADE)  
  * organization\_id \-\> organizations(id) (ON DELETE RESTRICT)  
* **Unique Keys (UK):**  
  * uq\_project\_parties\_contractor (project\_id, is\_contractor) \- **(Constraint ‡∏™‡∏≥‡∏Ñ‡∏±‡∏ç)** ‡∏ö‡∏±‡∏á‡∏Ñ‡∏±‡∏ö‡∏ß‡πà‡∏≤ 1 ‡πÇ‡∏Ñ‡∏£‡∏á‡∏Å‡∏≤‡∏£‡∏°‡∏µ CONTRACTOR ‡πÑ‡∏î‡πâ‡πÄ‡∏û‡∏µ‡∏¢‡∏á 1 ‡∏≠‡∏á‡∏Ñ‡πå‡∏Å‡∏£ (‡∏ï‡∏≤‡∏° Req 3.1.3)

#### **1.6. contract\_parties (‡∏ï‡∏≤‡∏£‡∏≤‡∏á‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°)**

‡∏ï‡∏≤‡∏£‡∏≤‡∏á‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏±‡∏°‡∏û‡∏±‡∏ô‡∏ò‡πå‡∏£‡∏∞‡∏´‡∏ß‡πà‡∏≤‡∏á ‡∏™‡∏±‡∏ç‡∏ç‡∏≤, ‡πÇ‡∏Ñ‡∏£‡∏á‡∏Å‡∏≤‡∏£, ‡πÅ‡∏•‡∏∞‡∏≠‡∏á‡∏Ñ‡πå‡∏Å‡∏£ (M:N)

| Column | Type | Key | Description |
| :---- | :---- | :---- | :---- |
| contract\_id | INT | **PK**, FK | ID ‡∏Ç‡∏≠‡∏á‡∏™‡∏±‡∏ç‡∏ç‡∏≤ (FK \-\> contracts(id)) |
| project\_id | INT | **PK**, FK | ID ‡∏Ç‡∏≠‡∏á‡πÇ‡∏Ñ‡∏£‡∏á‡∏Å‡∏≤‡∏£ (FK \-\> projects(id)) |
| organization\_id | INT | **PK**, FK | ID ‡∏Ç‡∏≠‡∏á‡∏≠‡∏á‡∏Ñ‡πå‡∏Å‡∏£ (FK \-\> organizations(id)) |

* **Foreign Keys (FK):**  
  * contract\_id \-\> contracts(id) (ON DELETE CASCADE)  
  * project\_id \-\> projects(id) (ON DELETE CASCADE)  
  * organization\_id \-\> organizations(id) (ON DELETE CASCADE)

## **2\. üë• Users & RBAC (‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ, ‡∏™‡∏¥‡∏ó‡∏ò‡∏¥‡πå, ‡∏ö‡∏ó‡∏ö‡∏≤‡∏ó)**

#### **2.1. users**

‡∏ï‡∏≤‡∏£‡∏≤‡∏á Master ‡πÄ‡∏Å‡πá‡∏ö‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô (User)

| Column | Type | Key | Description |
| :---- | :---- | :---- | :---- |
| user\_id | INT | **PK** | ID ‡∏Ç‡∏≠‡∏á‡∏ï‡∏≤‡∏£‡∏≤‡∏á |
| username | VARCHAR(50) | UK | ‡∏ä‡∏∑‡πà‡∏≠‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô |
| password\_hash | VARCHAR(255) |  | ‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô (Hashed) |
| first\_name | VARCHAR(50) |  | ‡∏ä‡∏∑‡πà‡∏≠‡∏à‡∏£‡∏¥‡∏á |
| last\_name | VARCHAR(50) |  | ‡∏ô‡∏≤‡∏°‡∏™‡∏Å‡∏∏‡∏• |
| email | VARCHAR(100) | UK | ‡∏≠‡∏µ‡πÄ‡∏°‡∏• |
| organization\_id | INT | FK | ‡∏™‡∏±‡∏á‡∏Å‡∏±‡∏î‡∏≠‡∏á‡∏Ñ‡πå‡∏Å‡∏£ (FK \-\> organizations(id)) |
| is\_active | TINYINT(1) |  | ‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡∏Å‡∏≤‡∏£‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô |

* **Foreign Keys (FK):**  
  * organization\_id \-\> organizations(id) (ON DELETE SET NULL)  
* **Unique Keys (UK):** ux\_users\_username (username), ux\_users\_email (email)

#### **2.2. roles**

‡∏ï‡∏≤‡∏£‡∏≤‡∏á Master ‡πÄ‡∏Å‡πá‡∏ö "‡∏ö‡∏ó‡∏ö‡∏≤‡∏ó" ‡∏Ç‡∏≠‡∏á‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ‡πÉ‡∏ô‡∏£‡∏∞‡∏ö‡∏ö (‡πÄ‡∏ä‡πà‡∏ô SUPER\_ADMIN, ADMIN, EDITOR)

| Column | Type | Key | Description |
| :---- | :---- | :---- | :---- |
| role\_id | INT | **PK** | ID ‡∏Ç‡∏≠‡∏á‡∏ï‡∏≤‡∏£‡∏≤‡∏á |
| role\_code | VARCHAR(50) | UK | ‡∏£‡∏´‡∏±‡∏™‡∏ö‡∏ó‡∏ö‡∏≤‡∏ó (‡πÄ‡∏ä‡πà‡∏ô SUPER\_ADMIN, ADMIN, EDITOR, VIEWER) |
| role\_name | VARCHAR(100) |  | ‡∏ä‡∏∑‡πà‡∏≠‡∏ö‡∏ó‡∏ö‡∏≤‡∏ó |
| is\_system | BOOLEAN |  | (1 \= ‡∏ö‡∏ó‡∏ö‡∏≤‡∏ó‡∏Ç‡∏≠‡∏á‡∏£‡∏∞‡∏ö‡∏ö ‡∏•‡∏ö‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ) |

* **Unique Keys (UK):** role\_code

#### **2.3. permissions**

‡∏ï‡∏≤‡∏£‡∏≤‡∏á Master ‡πÄ‡∏Å‡πá‡∏ö "‡∏™‡∏¥‡∏ó‡∏ò‡∏¥‡πå" (Permission) ‡∏´‡∏£‡∏∑‡∏≠ "‡∏Å‡∏≤‡∏£‡∏Å‡∏£‡∏∞‡∏ó‡∏≥" ‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î‡πÉ‡∏ô‡∏£‡∏∞‡∏ö‡∏ö

| Column | Type | Key | Description |
| :---- | :---- | :---- | :---- |
| permission\_id | INT | **PK** | ID ‡∏Ç‡∏≠‡∏á‡∏ï‡∏≤‡∏£‡∏≤‡∏á |
| permission\_code | VARCHAR(100) | UK | ‡∏£‡∏´‡∏±‡∏™‡∏™‡∏¥‡∏ó‡∏ò‡∏¥‡πå (‡πÄ‡∏ä‡πà‡∏ô rfas.create, rfas.view) |
| module | VARCHAR(50) |  | ‡πÇ‡∏°‡∏î‡∏π‡∏•‡∏ó‡∏µ‡πà‡πÄ‡∏Å‡∏µ‡πà‡∏¢‡∏ß‡∏Ç‡πâ‡∏≠‡∏á |
| scope\_level | ENUM(...) |  | ‡∏£‡∏∞‡∏î‡∏±‡∏ö‡∏Ç‡∏≠‡∏á‡∏™‡∏¥‡∏ó‡∏ò‡∏¥‡πå (GLOBAL, ORG, PROJECT) |

* **Unique Keys (UK):** ux\_permissions\_code (permission\_code)

#### **2.4. role\_permissions (‡∏ï‡∏≤‡∏£‡∏≤‡∏á‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°)**

‡∏ï‡∏≤‡∏£‡∏≤‡∏á‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏£‡∏∞‡∏´‡∏ß‡πà‡∏≤‡∏á roles ‡πÅ‡∏•‡∏∞ permissions (M:N)

| Column | Type | Key | Description |
| :---- | :---- | :---- | :---- |
| role\_id | INT | **PK**, FK | ID ‡∏Ç‡∏≠‡∏á‡∏ö‡∏ó‡∏ö‡∏≤‡∏ó (FK \-\> roles(role\_id)) |
| permission\_id | INT | **PK**, FK | ID ‡∏Ç‡∏≠‡∏á‡∏™‡∏¥‡∏ó‡∏ò‡∏¥‡πå (FK \-\> permissions(permission\_id)) |

* **Foreign Keys (FK):**  
  * role\_id \-\> roles(role\_id) (ON DELETE CASCADE)  
  * permission\_id \-\> permissions(permission\_id) (ON DELETE CASCADE)

#### **2.5. user\_roles (‡∏ï‡∏≤‡∏£‡∏≤‡∏á‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°)**

‡∏ï‡∏≤‡∏£‡∏≤‡∏á‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ (users) ‡∏Å‡∏±‡∏ö‡∏ö‡∏ó‡∏ö‡∏≤‡∏ó (roles) ‡πÉ‡∏ô‡∏£‡∏∞‡∏î‡∏±‡∏ö **Global** (M:N)

| Column | Type | Key | Description |
| :---- | :---- | :---- | :---- |
| user\_id | INT | **PK**, FK | ID ‡∏Ç‡∏≠‡∏á‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ (FK \-\> users(user\_id)) |
| role\_id | INT | **PK**, FK | ID ‡∏Ç‡∏≠‡∏á‡∏ö‡∏ó‡∏ö‡∏≤‡∏ó (FK \-\> roles(role\_id)) |

* **Foreign Keys (FK):**  
  * user\_id \-\> users(user\_id) (ON DELETE CASCADE)  
  * role\_id \-\> roles(role\_id) (ON DELETE CASCADE)

#### **2.6. user\_project\_roles (‡∏ï‡∏≤‡∏£‡∏≤‡∏á‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°)**

‡∏ï‡∏≤‡∏£‡∏≤‡∏á‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ (users) ‡∏Å‡∏±‡∏ö‡∏ö‡∏ó‡∏ö‡∏≤‡∏ó (roles) ‡πÉ‡∏ô‡∏£‡∏∞‡∏î‡∏±‡∏ö **Project-Specific** (M:N) (Req 4.2)

| Column | Type | Key | Description |
| :---- | :---- | :---- | :---- |
| user\_id | INT | **PK**, FK | ID ‡∏Ç‡∏≠‡∏á‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ (FK \-\> users(user\_id)) |
| project\_id | INT | **PK**, FK | ID ‡∏Ç‡∏≠‡∏á‡πÇ‡∏Ñ‡∏£‡∏á‡∏Å‡∏≤‡∏£ (FK \-\> projects(id)) |
| role\_id | INT | **PK**, FK | ID ‡∏Ç‡∏≠‡∏á‡∏ö‡∏ó‡∏ö‡∏≤‡∏ó (FK \-\> roles(role\_id)) |

* **Foreign Keys (FK):**  
  * user\_id \-\> users(user\_id) (ON DELETE CASCADE)  
  * project\_id \-\> projects(id) (ON DELETE CASCADE)  
  * role\_id \-\> roles(role\_id) (ON DELETE CASCADE)

## **3\. ‚úâÔ∏è Correspondences (‡πÄ‡∏≠‡∏Å‡∏™‡∏≤‡∏£‡∏´‡∏•‡∏±‡∏Å, Revisions)**

#### **3.1. correspondence\_types**

‡∏ï‡∏≤‡∏£‡∏≤‡∏á Master ‡πÄ‡∏Å‡πá‡∏ö‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó‡πÄ‡∏≠‡∏Å‡∏™‡∏≤‡∏£‡πÇ‡∏ï‡πâ‡∏ï‡∏≠‡∏ö (‡πÄ‡∏ä‡πà‡∏ô RFA, RFI, LETTER, MOM)

| Column | Type | Key | Description |
| :---- | :---- | :---- | :---- |
| id | INT | **PK** | ID ‡∏Ç‡∏≠‡∏á‡∏ï‡∏≤‡∏£‡∏≤‡∏á |
| type\_code | VARCHAR(50) | UK | ‡∏£‡∏´‡∏±‡∏™‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó (‡πÄ‡∏ä‡πà‡∏ô RFA, RFI) |
| type\_name | VARCHAR(255) |  | ‡∏ä‡∏∑‡πà‡∏≠‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó |

* **Unique Keys (UK):** type\_code

#### **3.2. correspondence\_status**

‡∏ï‡∏≤‡∏£‡∏≤‡∏á Master ‡πÄ‡∏Å‡πá‡∏ö‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡∏Ç‡∏≠‡∏á‡πÄ‡∏≠‡∏Å‡∏™‡∏≤‡∏£ (‡πÄ‡∏ä‡πà‡∏ô DRAFT, SUBMITTED, CLOSED)

| Column | Type | Key | Description |
| :---- | :---- | :---- | :---- |
| id | INT | **PK** | ID ‡∏Ç‡∏≠‡∏á‡∏ï‡∏≤‡∏£‡∏≤‡∏á |
| status\_code | VARCHAR(50) | UK | ‡∏£‡∏´‡∏±‡∏™‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞ (‡πÄ‡∏ä‡πà‡∏ô DRAFT, SUBOWN) |
| status\_name | VARCHAR(255) |  | ‡∏ä‡∏∑‡πà‡∏≠‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞ |

* **Unique Keys (UK):** status\_code

#### **3.3. correspondences (Master)**

‡∏ï‡∏≤‡∏£‡∏≤‡∏á "‡πÅ‡∏°‡πà" ‡∏Ç‡∏≠‡∏á‡πÄ‡∏≠‡∏Å‡∏™‡∏≤‡∏£‡πÇ‡∏ï‡πâ‡∏ï‡∏≠‡∏ö ‡πÄ‡∏Å‡πá‡∏ö‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ó‡∏µ‡πà‡πÑ‡∏°‡πà‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡πÅ‡∏õ‡∏•‡∏á‡∏ï‡∏≤‡∏° Revision (‡πÄ‡∏ä‡πà‡∏ô ‡πÄ‡∏•‡∏Ç‡∏ó‡∏µ‡πà‡πÄ‡∏≠‡∏Å‡∏™‡∏≤‡∏£)

| Column | Type | Key | Description |
| :---- | :---- | :---- | :---- |
| id | INT | **PK** | ID ‡∏Ç‡∏≠‡∏á‡∏ï‡∏≤‡∏£‡∏≤‡∏á (‡∏ô‡∏µ‡πà‡∏Ñ‡∏∑‡∏≠ "Master ID" ‡∏ó‡∏µ‡πà‡πÉ‡∏ä‡πâ‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡πÇ‡∏¢‡∏á) |
| correspondence\_number | VARCHAR(100) | UK | ‡πÄ‡∏•‡∏Ç‡∏ó‡∏µ‡πà‡πÄ‡∏≠‡∏Å‡∏™‡∏≤‡∏£ (‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏à‡∏≤‡∏Å DocumentNumberingModule) |
| correspondence\_type\_id | INT | FK | ‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó‡πÄ‡∏≠‡∏Å‡∏™‡∏≤‡∏£ (FK \-\> correspondence\_types(id)) |
| is\_internal\_communication | TINYINT(1) |  | (1 \= ‡∏†‡∏≤‡∏¢‡πÉ‡∏ô, 0 \= ‡∏†‡∏≤‡∏¢‡∏ô‡∏≠‡∏Å) |
| project\_id | INT | FK | ‡∏≠‡∏¢‡∏π‡πà‡πÉ‡∏ô‡πÇ‡∏Ñ‡∏£‡∏á‡∏Å‡∏≤‡∏£ (FK \-\> projects(id)) |
| originator\_id | INT | FK | ‡∏≠‡∏á‡∏Ñ‡πå‡∏Å‡∏£‡∏ú‡∏π‡πâ‡∏™‡πà‡∏á (FK \-\> organizations(id)) |
| recipient\_id | INT | FK | ‡∏≠‡∏á‡∏Ñ‡πå‡∏Å‡∏£‡∏ú‡∏π‡πâ‡∏£‡∏±‡∏ö (FK \-\> organizations(id)) |
| created\_by | INT | FK | ‡∏ú‡∏π‡πâ‡∏™‡∏£‡πâ‡∏≤‡∏á (FK \-\> users(user\_id)) |
| deleted\_at | DATETIME |  | ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö Soft Delete |

* **Foreign Keys (FK):**  
  * correspondence\_type\_id \-\> correspondence\_types(id) (ON DELETE RESTRICT)  
  * project\_id \-\> projects(id) (ON DELETE CASCADE)  
  * originator\_id \-\> organizations(id) (ON DELETE SET NULL)  
  * recipient\_id \-\> organizations(id) (ON DELETE SET NULL)  
  * created\_by \-\> users(user\_id) (ON DELETE SET NULL)  
* **Unique Keys (UK):** uq\_corr\_no\_per\_project (project\_id, correspondence\_number)

#### **3.4. correspondence\_revisions (Revisions)**

‡∏ï‡∏≤‡∏£‡∏≤‡∏á "‡∏•‡∏π‡∏Å" ‡πÄ‡∏Å‡πá‡∏ö‡∏õ‡∏£‡∏∞‡∏ß‡∏±‡∏ï‡∏¥‡∏Å‡∏≤‡∏£‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç (Revisions) ‡∏Ç‡∏≠‡∏á correspondences (1:N) **(‡∏õ‡∏£‡∏±‡∏ö‡∏õ‡∏£‡∏∏‡∏á)** id ‡πÄ‡∏õ‡πá‡∏ô PK ‡πÉ‡∏´‡∏°‡πà ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏£‡∏≠‡∏á‡∏£‡∏±‡∏ö 1:N

| Column | Type | Key | Description |
| :---- | :---- | :---- | :---- |
| id | INT | **PK** | **ID ‡∏Ç‡∏≠‡∏á Revision** |
| correspondence\_id | INT | FK, UK | Master ID (FK \-\> correspondences(id)) |
| revision\_number | INT | UK | ‡∏´‡∏°‡∏≤‡∏¢‡πÄ‡∏•‡∏Ç Revision (0, 1, 2...) |
| revision\_label | VARCHAR(10) |  | Revision ‡∏ó‡∏µ‡πà‡πÅ‡∏™‡∏î‡∏á (‡πÄ‡∏ä‡πà‡∏ô A, B, 1.1) |
| is\_current | BOOLEAN | UK | (1 \= Revision ‡∏õ‡∏±‡∏à‡∏à‡∏∏‡∏ö‡∏±‡∏ô) |
| correspondence\_status\_id | INT | FK | ‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡∏Ç‡∏≠‡∏á Revision ‡∏ô‡∏µ‡πâ (FK \-\> correspondence\_status(id)) |
| title | VARCHAR(255) |  | ‡πÄ‡∏£‡∏∑‡πà‡∏≠‡∏á |
| document\_date | DATE |  | ‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡πÉ‡∏ô‡πÄ‡∏≠‡∏Å‡∏™‡∏≤‡∏£ |
| issued\_date | DATETIME |  | ‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡∏≠‡∏≠‡∏Å‡πÄ‡∏≠‡∏Å‡∏™‡∏≤‡∏£ |
| received\_date | DATETIME |  | ‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡∏•‡∏á‡∏£‡∏±‡∏ö |
| due\_date | DATETIME |  | **(‡πÑ‡∏°‡πà‡∏™‡∏≠‡∏î‡∏Ñ‡∏•‡πâ‡∏≠‡∏á‡∏Å‡∏±‡∏ö Req 3.2.5)** ‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡∏Ñ‡∏£‡∏ö‡∏Å‡∏≥‡∏´‡∏ô‡∏î (‡∏Ñ‡∏ß‡∏£‡∏¢‡πâ‡∏≤‡∏¢‡πÑ‡∏õ correspondence\_recipients) |
| details | JSON |  | ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÄ‡∏â‡∏û‡∏≤‡∏∞ (‡πÄ‡∏ä‡πà‡∏ô RFI details) |
| created\_by | INT | FK | ‡∏ú‡∏π‡πâ‡∏™‡∏£‡πâ‡∏≤‡∏á (FK \-\> users(user\_id)) |

* **Foreign Keys (FK):**  
  * correspondence\_id \-\> correspondences(id) (ON DELETE CASCADE)  
  * correspondence\_status\_id \-\> correspondence\_status(id) (ON DELETE RESTRICT)  
  * created\_by \-\> users(user\_id) (ON DELETE SET NULL)  
* **Unique Keys (UK):**  
  * uq\_master\_revision\_number (correspondence\_id, revision\_number) (‡∏õ‡πâ‡∏≠‡∏á‡∏Å‡∏±‡∏ô Rev ‡∏ã‡πâ‡∏≥‡πÉ‡∏ô Master ‡πÄ‡∏î‡∏µ‡∏¢‡∏ß)  
  * uq\_master\_current (correspondence\_id, is\_current) (‡∏õ‡πâ‡∏≠‡∏á‡∏Å‡∏±‡∏ô‡∏Å‡∏≤‡∏£‡∏°‡∏µ is\_current \= TRUE ‡∏ã‡πâ‡∏≥‡πÉ‡∏ô Master ‡πÄ‡∏î‡∏µ‡∏¢‡∏ß)  
* **Check Constraints (CHK):** chk\_rev\_format (‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏£‡∏π‡∏õ‡πÅ‡∏ö‡∏ö revision\_label)

#### **3.5. correspondence\_recipients (‡∏ï‡∏≤‡∏£‡∏≤‡∏á‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°)**

‡∏ï‡∏≤‡∏£‡∏≤‡∏á‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏ú‡∏π‡πâ‡∏£‡∏±‡∏ö (TO/CC) ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡πÄ‡∏≠‡∏Å‡∏™‡∏≤‡∏£‡πÅ‡∏ï‡πà‡∏•‡∏∞‡∏â‡∏ö‡∏±‡∏ö (M:N)

| Column | Type | Key | Description |
| :---- | :---- | :---- | :---- |
| correspondence\_id | INT | **PK**, FK | ID ‡∏Ç‡∏≠‡∏á‡πÄ‡∏≠‡∏Å‡∏™‡∏≤‡∏£ (FK \-\> correspondence\_revisions(correspondence\_id)) |
| recipient\_organization\_id | INT | **PK**, FK | ID ‡∏≠‡∏á‡∏Ñ‡πå‡∏Å‡∏£‡∏ú‡∏π‡πâ‡∏£‡∏±‡∏ö (FK \-\> organizations(id)) |
| recipient\_type | ENUM('TO', 'CC') | **PK** | ‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó‡∏ú‡∏π‡πâ‡∏£‡∏±‡∏ö (TO ‡∏´‡∏£‡∏∑‡∏≠ CC) |

* **Foreign Keys (FK):**  
  * correspondence\_id \-\> correspondence\_revisions(correspondence\_id) (ON DELETE CASCADE)  
  * recipient\_organization\_id \-\> organizations(id) (ON DELETE RESTRICT)

#### **3.6. correspondence\_references (‡∏ï‡∏≤‡∏£‡∏≤‡∏á‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°)**

‡∏ï‡∏≤‡∏£‡∏≤‡∏á‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏Å‡∏≤‡∏£‡∏≠‡πâ‡∏≤‡∏á‡∏≠‡∏¥‡∏á‡∏£‡∏∞‡∏´‡∏ß‡πà‡∏≤‡∏á‡πÄ‡∏≠‡∏Å‡∏™‡∏≤‡∏£ (M:N) (Req 3.2.4)

| Column | Type | Key | Description |
| :---- | :---- | :---- | :---- |
| src\_correspondence\_id | INT | **PK**, FK | ID ‡πÄ‡∏≠‡∏Å‡∏™‡∏≤‡∏£‡∏ï‡πâ‡∏ô‡∏ó‡∏≤‡∏á (FK \-\> correspondences(id)) |
| tgt\_correspondence\_id | INT | **PK**, FK | ID ‡πÄ‡∏≠‡∏Å‡∏™‡∏≤‡∏£‡πÄ‡∏õ‡πâ‡∏≤‡∏´‡∏°‡∏≤‡∏¢ (FK \-\> correspondences(id)) |

* **Foreign Keys (FK):**  
  * src\_correspondence\_id \-\> correspondences(id) (ON DELETE CASCADE)  
  * tgt\_correspondence\_id \-\> correspondences(id) (ON DELETE CASCADE)

#### **3.7. correspondence\_routing\_templates / ...\_steps / ...\_routings**

‡∏ï‡∏≤‡∏£‡∏≤‡∏á‡∏ó‡∏µ‡πà‡πÄ‡∏Å‡∏µ‡πà‡∏¢‡∏ß‡∏Ç‡πâ‡∏≠‡∏á‡∏Å‡∏±‡∏ö Workflow ‡∏Å‡∏≤‡∏£‡∏™‡πà‡∏á‡∏ï‡πà‡∏≠‡πÄ‡∏≠‡∏Å‡∏™‡∏≤‡∏£ (Req 3.5.4)

* **correspondence\_routing\_templates:** ‡∏ï‡∏≤‡∏£‡∏≤‡∏á Master ‡πÄ‡∏Å‡πá‡∏ö‡πÅ‡∏°‡πà‡πÅ‡∏ö‡∏ö‡∏™‡∏≤‡∏¢‡∏á‡∏≤‡∏ô (‡πÄ‡∏ä‡πà‡∏ô "‡∏™‡πà‡∏á‡πÉ‡∏´‡πâ CSC ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö")  
* **correspondence\_routing\_template\_steps:** ‡∏ï‡∏≤‡∏£‡∏≤‡∏á‡∏•‡∏π‡∏Å ‡πÄ‡∏Å‡πá‡∏ö‡∏Ç‡∏±‡πâ‡∏ô‡∏ï‡∏≠‡∏ô‡πÉ‡∏ô‡πÅ‡∏°‡πà‡πÅ‡∏ö‡∏ö (‡πÄ‡∏ä‡πà‡∏ô Step 1: ‡∏™‡πà‡∏á‡πÑ‡∏õ Org A, Step 2: ‡∏™‡πà‡∏á‡πÑ‡∏õ Org B)  
* **correspondence\_routings:** ‡∏ï‡∏≤‡∏£‡∏≤‡∏á‡∏õ‡∏£‡∏∞‡∏ß‡∏±‡∏ï‡∏¥ (Log) ‡∏Å‡∏≤‡∏£‡∏™‡πà‡∏á‡∏ï‡πà‡∏≠‡∏Ç‡∏≠‡∏á‡πÄ‡∏≠‡∏Å‡∏™‡∏≤‡∏£‡∏à‡∏£‡∏¥‡∏á‡∏ï‡∏≤‡∏° Workflow

## **4\. approval: RFA (‡πÄ‡∏≠‡∏Å‡∏™‡∏≤‡∏£‡∏Ç‡∏≠‡∏≠‡∏ô‡∏∏‡∏°‡∏±‡∏ï‡∏¥, Workflows)**

#### **4.1. rfa\_types / ...\_status\_codes / ...\_approve\_codes**

‡∏ï‡∏≤‡∏£‡∏≤‡∏á Master ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö RFA

* **rfa\_types:** ‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó RFA (‡πÄ‡∏ä‡πà‡∏ô DWG, DOC, MAT) (Req 3.5.2)  
* **rfa\_status\_codes:** ‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞ RFA (‡πÄ‡∏ä‡πà‡∏ô DFT \- Draft, FAP \- For Approve)  
* **rfa\_approve\_codes:** ‡∏£‡∏´‡∏±‡∏™‡∏ú‡∏•‡∏Å‡∏≤‡∏£‡∏≠‡∏ô‡∏∏‡∏°‡∏±‡∏ï‡∏¥ (‡πÄ‡∏ä‡πà‡∏ô 1A \- Approved, 3R \- Revise and Resubmit)

#### **4.2. rfas (Master)**

‡∏ï‡∏≤‡∏£‡∏≤‡∏á "‡πÅ‡∏°‡πà" ‡∏Ç‡∏≠‡∏á RFA (‡∏°‡∏µ‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏±‡∏°‡∏û‡∏±‡∏ô‡∏ò‡πå 1:N ‡∏Å‡∏±‡∏ö rfa\_revisions)

| Column | Type | Key | Description |
| :---- | :---- | :---- | :---- |
| id | INT | **PK** | ID ‡∏Ç‡∏≠‡∏á‡∏ï‡∏≤‡∏£‡∏≤‡∏á (RFA Master ID) |
| rfa\_type\_id | INT | FK | ‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó RFA (FK \-\> rfa\_types(id)) |
| revision\_number | INT |  | ‡∏´‡∏°‡∏≤‡∏¢‡πÄ‡∏•‡∏Ç Revision ‡∏•‡πà‡∏≤‡∏™‡∏∏‡∏î (‡∏Ñ‡∏ß‡∏£‡∏¢‡πâ‡∏≤‡∏¢‡πÑ‡∏õ rfa\_revisions) |
| created\_by | INT | FK | ‡∏ú‡∏π‡πâ‡∏™‡∏£‡πâ‡∏≤‡∏á (FK \-\> users(user\_id)) |
| deleted\_at | DATETIME |  | ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö Soft Delete |

* **Foreign Keys (FK):**  
  * rfa\_type\_id \-\> rfa\_types(id)  
  * created\_by \-\> users(user\_id) (ON DELETE SET NULL)

#### **4.3. rfa\_revisions (Revisions)**

‡∏ï‡∏≤‡∏£‡∏≤‡∏á "‡∏•‡∏π‡∏Å" ‡πÄ‡∏Å‡πá‡∏ö‡∏õ‡∏£‡∏∞‡∏ß‡∏±‡∏ï‡∏¥ (Revisions) ‡∏Ç‡∏≠‡∏á rfas (1:N) **(‡∏õ‡∏£‡∏±‡∏ö‡∏õ‡∏£‡∏∏‡∏á)** id ‡πÄ‡∏õ‡πá‡∏ô PK ‡πÉ‡∏´‡∏°‡πà ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏£‡∏≠‡∏á‡∏£‡∏±‡∏ö 1:N

| Column | Type | Key | Description |
| :---- | :---- | :---- | :---- |
| id | INT | **PK** | **ID ‡∏Ç‡∏≠‡∏á Revision** |
| correspondence\_id | INT | FK | Master ID ‡∏Ç‡∏≠‡∏á Correspondence (FK \-\> correspondences(id)) |
| rfa\_id | INT | FK, UK | Master ID ‡∏Ç‡∏≠‡∏á RFA (FK \-\> rfas(id)) |
| revision\_number | INT | UK | ‡∏´‡∏°‡∏≤‡∏¢‡πÄ‡∏•‡∏Ç Revision (0, 1, 2...) |
| is\_current | BOOLEAN | UK | (1 \= Revision ‡∏õ‡∏±‡∏à‡∏à‡∏∏‡∏ö‡∏±‡∏ô) |
| rfa\_status\_code\_id | INT | FK | ‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞ RFA (FK \-\> rfa\_status\_codes(id)) |
| rfa\_approve\_code\_id | INT | FK | ‡∏ú‡∏•‡∏Å‡∏≤‡∏£‡∏≠‡∏ô‡∏∏‡∏°‡∏±‡∏ï‡∏¥ (FK \-\> rfa\_approve\_codes(id)) |
| title | VARCHAR(255) |  | ‡πÄ‡∏£‡∏∑‡πà‡∏≠‡∏á |
| due\_date | DATETIME |  | **(‡πÑ‡∏°‡πà‡∏™‡∏≠‡∏î‡∏Ñ‡∏•‡πâ‡∏≠‡∏á‡∏Å‡∏±‡∏ö Req 3.6.6)** ‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡∏Ñ‡∏£‡∏ö‡∏Å‡∏≥‡∏´‡∏ô‡∏î (‡∏Ñ‡∏ß‡∏£‡∏¢‡πâ‡∏≤‡∏¢‡πÑ‡∏õ rfa\_workflows) |
| created\_by | INT | FK | ‡∏ú‡∏π‡πâ‡∏™‡∏£‡πâ‡∏≤‡∏á (FK \-\> users(user\_id)) |

* **Foreign Keys (FK):**  
  * correspondence\_id \-\> correspondences(id) (ON DELETE CASCADE)  
  * rfa\_id \-\> rfas(id) (ON DELETE CASCADE)  
  * rfa\_status\_code\_id \-\> rfa\_status\_codes(id)  
  * rfa\_approve\_code\_id \-\> rfa\_approve\_codes(id) (ON DELETE SET NULL)  
  * created\_by \-\> users(user\_id) (ON DELETE SET NULL)  
* **Unique Keys (UK):**  
  * uq\_rr\_rev\_number (rfa\_id, revision\_number) (‡∏õ‡πâ‡∏≠‡∏á‡∏Å‡∏±‡∏ô Rev ‡∏ã‡πâ‡∏≥‡πÉ‡∏ô Master ‡πÄ‡∏î‡∏µ‡∏¢‡∏ß)  
  * uq\_rr\_current (rfa\_id, is\_current) (‡∏õ‡πâ‡∏≠‡∏á‡∏Å‡∏±‡∏ô is\_current=TRUE ‡∏ã‡πâ‡∏≥‡πÉ‡∏ô Master ‡πÄ‡∏î‡∏µ‡∏¢‡∏ß)

#### **4.4. rfa\_items (‡∏ï‡∏≤‡∏£‡∏≤‡∏á‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°)**

‡∏ï‡∏≤‡∏£‡∏≤‡∏á‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏£‡∏∞‡∏´‡∏ß‡πà‡∏≤‡∏á rfa\_revisions (‡∏ó‡∏µ‡πà‡πÄ‡∏õ‡πá‡∏ô‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó DWG) ‡∏Å‡∏±‡∏ö shop\_drawing\_revisions (M:N) (Req 3.5.4)

| Column | Type | Key | Description |
| :---- | :---- | :---- | :---- |
| rfarev\_correspondence\_id | INT | **PK**, FK | ID ‡∏Ç‡∏≠‡∏á RFA Revision (FK \-\> rfa\_revisions(correspondence\_id)) |
| shop\_drawing\_revision\_id | INT | **PK**, UK, FK | ID ‡∏Ç‡∏≠‡∏á Shop Drawing Revision (FK \-\> shop\_drawing\_revisions(id)) |

* **Foreign Keys (FK):**  
  * rfarev\_correspondence\_id \-\> rfa\_revisions(correspondence\_id) (ON DELETE CASCADE)  
  * shop\_drawing\_revision\_id \-\> shop\_drawing\_revisions(id) (ON DELETE CASCADE)

#### **4.5. rfa\_workflow\_templates / ...\_steps / ...\_workflows**

‡∏ï‡∏≤‡∏£‡∏≤‡∏á‡∏ó‡∏µ‡πà‡πÄ‡∏Å‡∏µ‡πà‡∏¢‡∏ß‡∏Ç‡πâ‡∏≠‡∏á‡∏Å‡∏±‡∏ö Workflow ‡∏Å‡∏≤‡∏£‡∏≠‡∏ô‡∏∏‡∏°‡∏±‡∏ï‡∏¥ RFA (Req 3.6.5)

* **rfa\_workflow\_templates:** ‡∏ï‡∏≤‡∏£‡∏≤‡∏á Master ‡πÄ‡∏Å‡πá‡∏ö‡πÅ‡∏°‡πà‡πÅ‡∏ö‡∏ö‡∏™‡∏≤‡∏¢‡∏≠‡∏ô‡∏∏‡∏°‡∏±‡∏ï‡∏¥ (‡πÄ‡∏ä‡πà‡∏ô "‡∏™‡∏≤‡∏¢‡∏≠‡∏ô‡∏∏‡∏°‡∏±‡∏ï‡∏¥ 3 ‡∏Ç‡∏±‡πâ‡∏ô‡∏ï‡∏≠‡∏ô")  
* **rfa\_workflow\_template\_steps:** ‡∏ï‡∏≤‡∏£‡∏≤‡∏á‡∏•‡∏π‡∏Å ‡πÄ‡∏Å‡πá‡∏ö‡∏Ç‡∏±‡πâ‡∏ô‡∏ï‡∏≠‡∏ô‡πÉ‡∏ô‡πÅ‡∏°‡πà‡πÅ‡∏ö‡∏ö (‡πÄ‡∏ä‡πà‡∏ô Step 1: Org A (Review), Step 2: Org B (Approve))  
* **rfa\_workflows:** ‡∏ï‡∏≤‡∏£‡∏≤‡∏á‡∏õ‡∏£‡∏∞‡∏ß‡∏±‡∏ï‡∏¥ (Log) ‡∏Å‡∏≤‡∏£‡∏≠‡∏ô‡∏∏‡∏°‡∏±‡∏ï‡∏¥‡∏Ç‡∏≠‡∏á RFA ‡∏à‡∏£‡∏¥‡∏á‡∏ï‡∏≤‡∏°‡∏™‡∏≤‡∏¢‡∏á‡∏≤‡∏ô

## **5\. üìê Drawings (‡πÅ‡∏ö‡∏ö, ‡∏´‡∏°‡∏ß‡∏î‡∏´‡∏°‡∏π‡πà)**

#### **5.1. contract\_drawing\_volumes / ...\_cats / ...\_sub\_cats / ...\_subcat\_cat\_maps**

‡∏ï‡∏≤‡∏£‡∏≤‡∏á Master ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö "‡πÅ‡∏ö‡∏ö‡∏Ñ‡∏π‡πà‡∏™‡∏±‡∏ç‡∏ç‡∏≤" (Contract Drawings) (Req 3.3)

* **contract\_drawing\_volumes:** ‡πÄ‡∏Å‡πá‡∏ö "‡πÄ‡∏•‡πà‡∏°" ‡∏Ç‡∏≠‡∏á‡πÅ‡∏ö‡∏ö  
* **contract\_drawing\_cats:** ‡πÄ‡∏Å‡πá‡∏ö "‡∏´‡∏°‡∏ß‡∏î‡∏´‡∏°‡∏π‡πà‡∏´‡∏•‡∏±‡∏Å" ‡∏Ç‡∏≠‡∏á‡πÅ‡∏ö‡∏ö  
* **contract\_drawing\_sub\_cats:** ‡πÄ‡∏Å‡πá‡∏ö "‡∏´‡∏°‡∏ß‡∏î‡∏´‡∏°‡∏π‡πà‡∏¢‡πà‡∏≠‡∏¢" ‡∏Ç‡∏≠‡∏á‡πÅ‡∏ö‡∏ö  
* **contract\_drawing\_subcat\_cat\_maps:** ‡∏ï‡∏≤‡∏£‡∏≤‡∏á‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏£‡∏∞‡∏´‡∏ß‡πà‡∏≤‡∏á ‡∏´‡∏°‡∏ß‡∏î‡∏´‡∏°‡∏π‡πà‡∏´‡∏•‡∏±‡∏Å-‡∏¢‡πà‡∏≠‡∏¢ (M:N)

#### **5.2. contract\_drawings (Master)**

‡∏ï‡∏≤‡∏£‡∏≤‡∏á Master ‡πÄ‡∏Å‡πá‡∏ö‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏• "‡πÅ‡∏ö‡∏ö‡∏Ñ‡∏π‡πà‡∏™‡∏±‡∏ç‡∏ç‡∏≤" (Req 3.3.4)

| Column | Type | Key | Description |
| :---- | :---- | :---- | :---- |
| id | INT | **PK** | ID ‡∏Ç‡∏≠‡∏á‡∏ï‡∏≤‡∏£‡∏≤‡∏á |
| project\_id | INT | FK, UK | ‡πÇ‡∏Ñ‡∏£‡∏á‡∏Å‡∏≤‡∏£ (FK \-\> projects(id)) |
| condwg\_no | VARCHAR(255) | UK | ‡πÄ‡∏•‡∏Ç‡∏ó‡∏µ‡πà‡πÅ‡∏ö‡∏ö‡∏™‡∏±‡∏ç‡∏ç‡∏≤ |
| title | VARCHAR(255) |  | ‡∏ä‡∏∑‡πà‡∏≠‡πÅ‡∏ö‡∏ö |
| sub\_cat\_id | INT | FK | ‡∏´‡∏°‡∏ß‡∏î‡∏´‡∏°‡∏π‡πà‡∏¢‡πà‡∏≠‡∏¢ (FK \-\> contract\_drawing\_sub\_cats(id)) |
| volume\_id | INT | FK | ‡πÄ‡∏•‡πà‡∏° (FK \-\> contract\_drawing\_volumes(id)) |

* **Foreign Keys (FK):**  
  * fk\_condwg\_project (project\_id) \-\> projects(id) (ON DELETE CASCADE)  
  * fk\_condwg\_subcat\_same\_project (project\_id, sub\_cat\_id) \-\> contract\_drawing\_sub\_cats(project\_id, id)  
  * fk\_condwg\_volume\_same\_project (project\_id, volume\_id) \-\> contract\_drawing\_volumes(project\_id, id)  
* **Unique Keys (UK):** ux\_condwg\_no\_project (project\_id, condwg\_no)

#### **5.3. shop\_drawing\_main\_categories / ...\_sub\_categories**

‡∏ï‡∏≤‡∏£‡∏≤‡∏á Master ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö "‡πÅ‡∏ö‡∏ö‡∏Å‡πà‡∏≠‡∏™‡∏£‡πâ‡∏≤‡∏á" (Shop Drawings) (Req 3.4)

* **shop\_drawing\_main\_categories:** ‡πÄ‡∏Å‡πá‡∏ö "‡∏´‡∏°‡∏ß‡∏î‡∏´‡∏°‡∏π‡πà‡∏´‡∏•‡∏±‡∏Å" (‡πÄ‡∏ä‡πà‡∏ô ARCH, STR)  
* **shop\_drawing\_sub\_categories:** ‡πÄ‡∏Å‡πá‡∏ö "‡∏´‡∏°‡∏ß‡∏î‡∏´‡∏°‡∏π‡πà‡∏¢‡πà‡∏≠‡∏¢" (‡πÄ‡∏ä‡πà‡∏ô STR-COLUMN)

#### **5.4. shop\_drawings (Master)**

‡∏ï‡∏≤‡∏£‡∏≤‡∏á Master ‡πÄ‡∏Å‡πá‡∏ö‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏• "‡πÅ‡∏ö‡∏ö‡∏Å‡πà‡∏≠‡∏™‡∏£‡πâ‡∏≤‡∏á" (Req 3.4.4)

| Column | Type | Key | Description |
| :---- | :---- | :---- | :---- |
| id | INT | **PK** | ID ‡∏Ç‡∏≠‡∏á‡∏ï‡∏≤‡∏£‡∏≤‡∏á |
| project\_id | INT | FK | ‡πÇ‡∏Ñ‡∏£‡∏á‡∏Å‡∏≤‡∏£ (FK \-\> projects(id)) |
| drawing\_number | VARCHAR(100) | UK | ‡πÄ‡∏•‡∏Ç‡∏ó‡∏µ‡πà Shop Drawing |
| title | VARCHAR(500) |  | ‡∏ä‡∏∑‡πà‡∏≠‡πÅ‡∏ö‡∏ö |
| main\_category\_id | INT | FK | ‡∏´‡∏°‡∏ß‡∏î‡∏´‡∏°‡∏π‡πà‡∏´‡∏•‡∏±‡∏Å (FK \-\> shop\_drawing\_main\_categories(id)) |
| sub\_category\_id | INT | FK | ‡∏´‡∏°‡∏ß‡∏î‡∏´‡∏°‡∏π‡πà‡∏¢‡πà‡∏≠‡∏¢ (FK \-\> shop\_drawing\_sub\_categories(id)) |

* **Foreign Keys (FK):** project\_id, main\_category\_id, sub\_category\_id  
* **Unique Keys (UK):** ux\_sd\_drawing\_number (drawing\_number)

#### **5.5. shop\_drawing\_revisions (Revisions)**

‡∏ï‡∏≤‡∏£‡∏≤‡∏á "‡∏•‡∏π‡∏Å" ‡πÄ‡∏Å‡πá‡∏ö‡∏õ‡∏£‡∏∞‡∏ß‡∏±‡∏ï‡∏¥ (Revisions) ‡∏Ç‡∏≠‡∏á shop\_drawings (1:N) **(‡∏õ‡∏£‡∏±‡∏ö‡∏õ‡∏£‡∏∏‡∏á)** ‡∏•‡∏ö file\_path ‡∏≠‡∏≠‡∏Å‡πÅ‡∏•‡πâ‡∏ß

| Column | Type | Key | Description |
| :---- | :---- | :---- | :---- |
| id | INT | **PK** | ID ‡∏Ç‡∏≠‡∏á Revision |
| shop\_drawing\_id | INT | FK, UK | Master ID (FK \-\> shop\_drawings(id)) |
| revision\_number | VARCHAR(10) | UK | ‡∏´‡∏°‡∏≤‡∏¢‡πÄ‡∏•‡∏Ç Revision (‡πÄ‡∏ä‡πà‡∏ô A, B, 0, 1\) |
| revision\_date | DATE |  | ‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡∏Ç‡∏≠‡∏á Revision |
| description | TEXT |  | ‡∏Ñ‡∏≥‡∏≠‡∏ò‡∏¥‡∏ö‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç |

* **Foreign Keys (FK):**  
  * shop\_drawing\_id \-\> shop\_drawings(id) (ON DELETE CASCADE)  
* **Unique Keys (UK):** ux\_sd\_rev\_drawing\_revision (shop\_drawing\_id, revision\_number)

#### **5.6. shop\_drawing\_revision\_contract\_refs (‡∏ï‡∏≤‡∏£‡∏≤‡∏á‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°)**

‡∏ï‡∏≤‡∏£‡∏≤‡∏á‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏£‡∏∞‡∏´‡∏ß‡πà‡∏≤‡∏á shop\_drawing\_revisions ‡∏Å‡∏±‡∏ö contract\_drawings (M:N) (Req 3.5.4)

| Column | Type | Key | Description |
| :---- | :---- | :---- | :---- |
| shop\_drawing\_revision\_id | INT | FK | ID ‡∏Ç‡∏≠‡∏á Shop Drawing Revision (FK \-\> shop\_drawing\_revisions(id)) |
| contract\_drawing\_id | INT | FK | ID ‡∏Ç‡∏≠‡∏á Contract Drawing (FK \-\> contract\_drawings(id)) |

* **Foreign Keys (FK):** shop\_drawing\_revision\_id, contract\_drawing\_id

## **6\. üîÑ Circulations (‡πÉ‡∏ö‡πÄ‡∏ß‡∏µ‡∏¢‡∏ô‡∏†‡∏≤‡∏¢‡πÉ‡∏ô)**

#### **6.1. circulation\_status\_codes**

‡∏ï‡∏≤‡∏£‡∏≤‡∏á Master ‡πÄ‡∏Å‡πá‡∏ö‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡πÉ‡∏ö‡πÄ‡∏ß‡∏µ‡∏¢‡∏ô (‡πÄ‡∏ä‡πà‡∏ô OPEN, IN\_REVIEW, COMPLETED)

#### **6.2. circulations (Master)**

‡∏ï‡∏≤‡∏£‡∏≤‡∏á "‡πÅ‡∏°‡πà" ‡∏Ç‡∏≠‡∏á‡πÉ‡∏ö‡πÄ‡∏ß‡∏µ‡∏¢‡∏ô‡πÄ‡∏≠‡∏Å‡∏™‡∏≤‡∏£‡∏†‡∏≤‡∏¢‡πÉ‡∏ô (Req 3.7)

| Column | Type | Key | Description |
| :---- | :---- | :---- | :---- |
| id | INT | **PK** | ID ‡∏Ç‡∏≠‡∏á‡∏ï‡∏≤‡∏£‡∏≤‡∏á |
| correspondence\_id | INT | UK, FK | ‡πÄ‡∏≠‡∏Å‡∏™‡∏≤‡∏£‡∏ó‡∏µ‡πà‡πÉ‡∏ä‡πâ‡∏≠‡πâ‡∏≤‡∏á‡∏≠‡∏¥‡∏á (FK \-\> correspondences(id)) |
| organization\_id | INT | FK, UK | ‡∏≠‡∏á‡∏Ñ‡πå‡∏Å‡∏£‡πÄ‡∏à‡πâ‡∏≤‡∏Ç‡∏≠‡∏á‡πÉ‡∏ö‡πÄ‡∏ß‡∏µ‡∏¢‡∏ô (FK \-\> organizations(id)) |
| circulation\_no | VARCHAR(100) | UK | ‡πÄ‡∏•‡∏Ç‡∏ó‡∏µ‡πà‡πÉ‡∏ö‡πÄ‡∏ß‡∏µ‡∏¢‡∏ô |
| circulation\_subject | VARCHAR(500) |  | ‡πÄ‡∏£‡∏∑‡πà‡∏≠‡∏á |
| circulation\_status\_code | VARCHAR(20) | FK | ‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡πÉ‡∏ö‡πÄ‡∏ß‡∏µ‡∏¢‡∏ô (FK \-\> circulation\_status\_codes(code)) |
| created\_by\_user\_id | INT | FK | ‡∏ú‡∏π‡πâ‡∏™‡∏£‡πâ‡∏≤‡∏á (FK \-\> users(user\_id)) |

* **Foreign Keys (FK):** correspondence\_id, organization\_id, circulation\_status\_code, created\_by\_user\_id  
* **Unique Keys (UK):**  
  * correspondence\_id (1 ‡πÉ‡∏ö‡πÄ‡∏ß‡∏µ‡∏¢‡∏ô ‡∏ï‡πà‡∏≠ 1 ‡πÄ‡∏≠‡∏Å‡∏™‡∏≤‡∏£)  
  * uq\_cir\_org\_no (organization\_id, circulation\_no) (‡πÄ‡∏•‡∏Ç‡∏ó‡∏µ‡πà‡πÉ‡∏ö‡πÄ‡∏ß‡∏µ‡∏¢‡∏ô‡∏´‡πâ‡∏≤‡∏°‡∏ã‡πâ‡∏≥‡πÉ‡∏ô‡∏≠‡∏á‡∏Ñ‡πå‡∏Å‡∏£)

#### **6.3. circulation\_recipients / ...\_assignees / ...\_actions**

‡∏ï‡∏≤‡∏£‡∏≤‡∏á "‡∏•‡∏π‡∏Å" ‡∏Ç‡∏≠‡∏á circulations

* **circulation\_recipients:** ‡∏£‡∏≤‡∏¢‡∏ä‡∏∑‡πà‡∏≠‡∏ú‡∏π‡πâ‡∏£‡∏±‡∏ö (TO/CC) ‡∏†‡∏≤‡∏¢‡πÉ‡∏ô‡∏≠‡∏á‡∏Ñ‡πå‡∏Å‡∏£  
* **circulation\_assignees:** ‡∏£‡∏≤‡∏¢‡∏ä‡∏∑‡πà‡∏≠‡∏ú‡∏π‡πâ‡∏£‡∏±‡∏ö‡∏ú‡∏¥‡∏î‡∏ä‡∏≠‡∏ö (MAIN, ACTION, INFO) (Req 3.7.4) ‡πÅ‡∏•‡∏∞‡πÄ‡∏Å‡πá‡∏ö deadline (Req 3.7.5)  
* **circulation\_actions:** ‡∏õ‡∏£‡∏∞‡∏ß‡∏±‡∏ï‡∏¥‡∏Å‡∏≤‡∏£‡∏î‡∏≥‡πÄ‡∏ô‡∏¥‡∏ô‡∏Å‡∏≤‡∏£ (‡πÄ‡∏ä‡πà‡∏ô Comment, Forward, Close)  
* **circulation\_action\_documents:** ‡∏ï‡∏≤‡∏£‡∏≤‡∏á‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏° circulation\_actions ‡∏Å‡∏±‡∏ö attachments (‡πÑ‡∏ü‡∏•‡πå‡πÅ‡∏ô‡∏ö‡∏£‡∏∞‡∏´‡∏ß‡πà‡∏≤‡∏á‡∏î‡∏≥‡πÄ‡∏ô‡∏¥‡∏ô‡∏Å‡∏≤‡∏£)

#### **6.4. circulation\_templates / ...\_assignees**

‡∏ï‡∏≤‡∏£‡∏≤‡∏á‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡πÅ‡∏°‡πà‡πÅ‡∏ö‡∏ö‡πÉ‡∏ö‡πÄ‡∏ß‡∏µ‡∏¢‡∏ô (Templates)

* **circulation\_templates:** ‡∏ï‡∏≤‡∏£‡∏≤‡∏á Master ‡πÄ‡∏Å‡πá‡∏ö‡πÅ‡∏°‡πà‡πÅ‡∏ö‡∏ö‡πÉ‡∏ö‡πÄ‡∏ß‡∏µ‡∏¢‡∏ô  
* **circulation\_template\_assignees:** ‡∏ï‡∏≤‡∏£‡∏≤‡∏á‡∏•‡∏π‡∏Å ‡πÄ‡∏Å‡πá‡∏ö‡∏ú‡∏π‡πâ‡∏£‡∏±‡∏ö‡∏ú‡∏¥‡∏î‡∏ä‡∏≠‡∏ö‡∏ó‡∏µ‡πà‡∏Å‡∏≥‡∏´‡∏ô‡∏î‡πÑ‡∏ß‡πâ‡∏•‡πà‡∏ß‡∏á‡∏´‡∏ô‡πâ‡∏≤‡πÉ‡∏ô‡πÅ‡∏°‡πà‡πÅ‡∏ö‡∏ö

## **7\. üì§ Transmittals (‡πÄ‡∏≠‡∏Å‡∏™‡∏≤‡∏£‡∏ô‡∏≥‡∏™‡πà‡∏á)**

#### **7.1. transmittals**

‡∏ï‡∏≤‡∏£‡∏≤‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÄ‡∏â‡∏û‡∏≤‡∏∞‡∏Ç‡∏≠‡∏á‡πÄ‡∏≠‡∏Å‡∏™‡∏≤‡∏£‡∏ô‡∏≥‡∏™‡πà‡∏á (‡πÄ‡∏õ‡πá‡∏ô‡∏ï‡∏≤‡∏£‡∏≤‡∏á‡∏•‡∏π‡∏Å 1:1 ‡∏Ç‡∏≠‡∏á correspondences) (Req 3.6)

| Column | Type | Key | Description |
| :---- | :---- | :---- | :---- |
| correspondence\_id | INT | **PK**, FK | ID ‡∏Ç‡∏≠‡∏á‡πÄ‡∏≠‡∏Å‡∏™‡∏≤‡∏£ (FK \-\> correspondences(id)) |
| purpose | ENUM(...) |  | ‡∏ß‡∏±‡∏ï‡∏ñ‡∏∏‡∏õ‡∏£‡∏∞‡∏™‡∏á‡∏Ñ‡πå (FOR\_APPROVAL, FOR\_INFORMATION, ...) |
| remarks | TEXT |  | ‡∏´‡∏°‡∏≤‡∏¢‡πÄ‡∏´‡∏ï‡∏∏ |

* **Foreign Keys (FK):** correspondence\_id \-\> correspondences(id) (ON DELETE CASCADE)

#### **7.2. transmittal\_items (‡∏ï‡∏≤‡∏£‡∏≤‡∏á‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°)**

‡∏ï‡∏≤‡∏£‡∏≤‡∏á‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏£‡∏∞‡∏´‡∏ß‡πà‡∏≤‡∏á transmittals ‡πÅ‡∏•‡∏∞ rfa\_revisions (M:N) (Req 3.6.1)

| Column | Type | Key | Description |
| :---- | :---- | :---- | :---- |
| transmittal\_id | INT | **PK**, FK | ID ‡∏Ç‡∏≠‡∏á Transmittal (FK \-\> transmittals(correspondence\_id)) |
| rfarev\_id | INT | **PK**, FK | ID ‡∏Ç‡∏≠‡∏á RFA Revision (FK \-\> rfa\_revisions(correspondence\_id)) |

* **Foreign Keys (FK):**  
  * transmittal\_id \-\> transmittals(correspondence\_id) (ON DELETE CASCADE)  
  * rfarev\_id \-\> rfa\_revisions(correspondence\_id) (ON DELETE CASCADE)  
* **Unique Keys (UK):** ux\_transmittal\_item (transmittal\_id, rfarev\_id)

## **8\. üìé File Management (‡πÑ‡∏ü‡∏•‡πå‡πÅ‡∏ô‡∏ö)**

#### **8.1. attachments (Master)**

‡∏ï‡∏≤‡∏£‡∏≤‡∏á "‡∏Å‡∏•‡∏≤‡∏á" ‡πÄ‡∏Å‡πá‡∏ö‡πÑ‡∏ü‡∏•‡πå‡πÅ‡∏ô‡∏ö‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î‡∏Ç‡∏≠‡∏á‡∏£‡∏∞‡∏ö‡∏ö **(‡∏õ‡∏£‡∏±‡∏ö‡∏õ‡∏£‡∏∏‡∏á)** ‡πÄ‡∏õ‡πá‡∏ô‡∏ï‡∏≤‡∏£‡∏≤‡∏á‡∏Å‡∏•‡∏≤‡∏á ‡πÑ‡∏°‡πà‡∏°‡∏µ FK ‡πÑ‡∏õ‡∏¢‡∏±‡∏á‡∏ï‡∏≤‡∏£‡∏≤‡∏á‡∏≠‡∏∑‡πà‡∏ô

| Column | Type | Key | Description |
| :---- | :---- | :---- | :---- |
| id | INT | **PK** | ID ‡∏Ç‡∏≠‡∏á‡πÑ‡∏ü‡∏•‡πå‡πÅ‡∏ô‡∏ö |
| original\_filename | VARCHAR(255) |  | ‡∏ä‡∏∑‡πà‡∏≠‡πÑ‡∏ü‡∏•‡πå‡∏î‡∏±‡πâ‡∏á‡πÄ‡∏î‡∏¥‡∏° |
| stored\_filename | VARCHAR(255) |  | ‡∏ä‡∏∑‡πà‡∏≠‡πÑ‡∏ü‡∏•‡πå‡∏ó‡∏µ‡πà‡πÄ‡∏Å‡πá‡∏ö‡∏à‡∏£‡∏¥‡∏á (‡∏õ‡πâ‡∏≠‡∏á‡∏Å‡∏±‡∏ô‡∏ã‡πâ‡∏≥) |
| file\_path | VARCHAR(500) |  | Path ‡∏ó‡∏µ‡πà‡πÄ‡∏Å‡πá‡∏ö‡πÑ‡∏ü‡∏•‡πå (‡∏ö‡∏ô QNAP /share/dms-data/) |
| mime\_type | VARCHAR(100) |  | ‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó‡πÑ‡∏ü‡∏•‡πå (‡πÄ‡∏ä‡πà‡∏ô application/pdf) |
| file\_size | INT |  | ‡∏Ç‡∏ô‡∏≤‡∏î‡πÑ‡∏ü‡∏•‡πå (bytes) |
| uploaded\_by\_user\_id | INT | FK | ‡∏ú‡∏π‡πâ‡∏≠‡∏±‡∏õ‡πÇ‡∏´‡∏•‡∏î (FK \-\> users(user\_id)) |

* **Foreign Keys (FK):** uploaded\_by\_user\_id \-\> users(user\_id) (ON DELETE CASCADE)

#### **8.2. correspondence\_attachments (‡∏ï‡∏≤‡∏£‡∏≤‡∏á‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏° \- ‡πÉ‡∏´‡∏°‡πà)**

‡∏ï‡∏≤‡∏£‡∏≤‡∏á‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏° correspondences ‡∏Å‡∏±‡∏ö attachments (M:N)

| Column | Type | Key | Description |
| :---- | :---- | :---- | :---- |
| correspondence\_id | INT | **PK**, FK | ID ‡∏Ç‡∏≠‡∏á‡πÄ‡∏≠‡∏Å‡∏™‡∏≤‡∏£ (FK \-\> correspondences(id)) |
| attachment\_id | INT | **PK**, FK | ID ‡∏Ç‡∏≠‡∏á‡πÑ‡∏ü‡∏•‡πå‡πÅ‡∏ô‡∏ö (FK \-\> attachments(id)) |
| is\_main\_document | BOOLEAN |  | (1 \= ‡πÑ‡∏ü‡∏•‡πå‡∏´‡∏•‡∏±‡∏Å) (Req 5.7) |

* **Foreign Keys (FK):** correspondence\_id, attachment\_id

#### **8.3. circulation\_attachments (‡∏ï‡∏≤‡∏£‡∏≤‡∏á‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏° \- ‡πÉ‡∏´‡∏°‡πà)**

‡∏ï‡∏≤‡∏£‡∏≤‡∏á‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏° circulations ‡∏Å‡∏±‡∏ö attachments (M:N)

| Column | Type | Key | Description |
| :---- | :---- | :---- | :---- |
| circulation\_id | INT | **PK**, FK | ID ‡∏Ç‡∏≠‡∏á‡πÉ‡∏ö‡πÄ‡∏ß‡∏µ‡∏¢‡∏ô (FK \-\> circulations(id)) |
| attachment\_id | INT | **PK**, FK | ID ‡∏Ç‡∏≠‡∏á‡πÑ‡∏ü‡∏•‡πå‡πÅ‡∏ô‡∏ö (FK \-\> attachments(id)) |
| is\_main\_document | BOOLEAN |  | (1 \= ‡πÑ‡∏ü‡∏•‡πå‡∏´‡∏•‡∏±‡∏Å) |

* **Foreign Keys (FK):** circulation\_id, attachment\_id

#### **8.4. shop\_drawing\_revision\_attachments (‡∏ï‡∏≤‡∏£‡∏≤‡∏á‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏° \- ‡πÉ‡∏´‡∏°‡πà)**

‡∏ï‡∏≤‡∏£‡∏≤‡∏á‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏° shop\_drawing\_revisions ‡∏Å‡∏±‡∏ö attachments (M:N)

| Column | Type | Key | Description |
| :---- | :---- | :---- | :---- |
| shop\_drawing\_revision\_id | INT | **PK**, FK | ID ‡∏Ç‡∏≠‡∏á Drawing Revision (FK \-\> shop\_drawing\_revisions(id)) |
| attachment\_id | INT | **PK**, FK | ID ‡∏Ç‡∏≠‡∏á‡πÑ‡∏ü‡∏•‡πå‡πÅ‡∏ô‡∏ö (FK \-\> attachments(id)) |
| file\_type | ENUM(...) |  | ‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó‡πÑ‡∏ü‡∏•‡πå (PDF, DWG, SOURCE, OTHER) (Req 5.7) |

* **Foreign Keys (FK):** shop\_drawing\_revision\_id, attachment\_id

## **9\. üî¢ Document Numbering (‡∏Å‡∏≤‡∏£‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÄ‡∏•‡∏Ç‡∏ó‡∏µ‡πà‡πÄ‡∏≠‡∏Å‡∏™‡∏≤‡∏£)**

#### **9.1. document\_number\_formats (‡∏ï‡∏≤‡∏£‡∏≤‡∏á‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤ \- ‡πÉ‡∏´‡∏°‡πà)**

‡∏ï‡∏≤‡∏£‡∏≤‡∏á Master ‡πÄ‡∏Å‡πá‡∏ö "‡∏£‡∏π‡∏õ‡πÅ‡∏ö‡∏ö" Template ‡∏Ç‡∏≠‡∏á‡πÄ‡∏•‡∏Ç‡∏ó‡∏µ‡πà‡πÄ‡∏≠‡∏Å‡∏™‡∏≤‡∏£ (Req 3.10)

| Column | Type | Key | Description |
| :---- | :---- | :---- | :---- |
| id | INT | **PK** | ID ‡∏Ç‡∏≠‡∏á‡∏ï‡∏≤‡∏£‡∏≤‡∏á |
| project\_id | INT | FK, UK | ‡πÇ‡∏Ñ‡∏£‡∏á‡∏Å‡∏≤‡∏£ (FK \-\> projects(id)) |
| correspondence\_type\_id | INT | FK, UK | ‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó‡πÄ‡∏≠‡∏Å‡∏™‡∏≤‡∏£ (FK \-\> correspondence\_types(id)) |
| format\_template | VARCHAR(255) |  | ‡∏£‡∏π‡∏õ‡πÅ‡∏ö‡∏ö Template (‡πÄ‡∏ä‡πà‡∏ô {ORG\_CODE}-{TYPE\_CODE}-{SEQ:4}) |

* **Foreign Keys (FK):** project\_id, correspondence\_type\_id  
* **Unique Keys (UK):** uk\_project\_type (project\_id, correspondence\_type\_id)

#### **9.2. document\_number\_counters (‡∏ï‡∏≤‡∏£‡∏≤‡∏á‡∏ï‡∏±‡∏ß‡∏ô‡∏±‡∏ö \- ‡πÉ‡∏´‡∏°‡πà)**

‡∏ï‡∏≤‡∏£‡∏≤‡∏á‡πÄ‡∏Å‡πá‡∏ö "‡∏ï‡∏±‡∏ß‡∏ô‡∏±‡∏ö" (Running Number) ‡∏•‡πà‡∏≤‡∏™‡∏∏‡∏î (Req 3.10.2)

| Column | Type | Key | Description |
| :---- | :---- | :---- | :---- |
| project\_id | INT | **PK**, FK | ‡πÇ‡∏Ñ‡∏£‡∏á‡∏Å‡∏≤‡∏£ (FK \-\> projects(id)) |
| originator\_organization\_id | INT | **PK**, FK | ‡∏≠‡∏á‡∏Ñ‡πå‡∏Å‡∏£‡∏ú‡∏π‡πâ‡∏™‡πà‡∏á (FK \-\> organizations(id)) |
| correspondence\_type\_id | INT | **PK**, FK | ‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó‡πÄ‡∏≠‡∏Å‡∏™‡∏≤‡∏£ (FK \-\> correspondence\_types(id)) |
| current\_year | INT | **PK** | ‡∏õ‡∏µ ‡∏Ñ.‡∏®. ‡∏Ç‡∏≠‡∏á‡∏ï‡∏±‡∏ß‡∏ô‡∏±‡∏ö |
| last\_number | INT |  | ‡πÄ‡∏•‡∏Ç‡∏ó‡∏µ‡πà‡∏•‡πà‡∏≤‡∏™‡∏∏‡∏î‡∏ó‡∏µ‡πà‡πÉ‡∏ä‡πâ‡πÑ‡∏õ |

* **Foreign Keys (FK):** project\_id, originator\_organization\_id, correspondence\_type\_id

## **10\. ‚öôÔ∏è System & Logs (‡∏£‡∏∞‡∏ö‡∏ö‡πÅ‡∏•‡∏∞ Log)**

#### **10.1. tags**

‡∏ï‡∏≤‡∏£‡∏≤‡∏á Master ‡πÄ‡∏Å‡πá‡∏ö Tags ‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î‡∏ó‡∏µ‡πà‡πÉ‡∏ä‡πâ‡πÉ‡∏ô‡∏£‡∏∞‡∏ö‡∏ö (Req 6.2)

| Column | Type | Key | Description |
| :---- | :---- | :---- | :---- |
| id | INT | **PK** | ID ‡∏Ç‡∏≠‡∏á‡∏ï‡∏≤‡∏£‡∏≤‡∏á |
| tag\_name | VARCHAR(100) | UK | ‡∏ä‡∏∑‡πà‡∏≠ Tag |

* **Unique Keys (UK):** ux\_tag\_name (tag\_name)

#### **10.2. correspondence\_tags (‡∏ï‡∏≤‡∏£‡∏≤‡∏á‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°)**

‡∏ï‡∏≤‡∏£‡∏≤‡∏á‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏£‡∏∞‡∏´‡∏ß‡πà‡∏≤‡∏á correspondences ‡πÅ‡∏•‡∏∞ tags (M:N) (Req 3.2.4)

| Column | Type | Key | Description |
| :---- | :---- | :---- | :---- |
| correspondence\_id | INT | **PK**, FK | ID ‡∏Ç‡∏≠‡∏á‡πÄ‡∏≠‡∏Å‡∏™‡∏≤‡∏£ (FK \-\> correspondences(id)) |
| tag\_id | INT | **PK**, FK | ID ‡∏Ç‡∏≠‡∏á Tag (FK \-\> tags(id)) |

* **Foreign Keys (FK):** correspondence\_id, tag\_id

#### **10.3. audit\_logs**

‡∏ï‡∏≤‡∏£‡∏≤‡∏á‡πÄ‡∏Å‡πá‡∏ö‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Å‡∏≤‡∏£‡∏Å‡∏£‡∏∞‡∏ó‡∏≥‡∏Ç‡∏≠‡∏á‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ (Req 6.1)

| Column | Type | Key | Description |
| :---- | :---- | :---- | :---- |
| audit\_id | BIGINT | **PK** | ID ‡∏Ç‡∏≠‡∏á Log |
| user\_id | INT | FK | ‡∏ú‡∏π‡πâ‡∏Å‡∏£‡∏∞‡∏ó‡∏≥ (FK \-\> users(user\_id)) |
| action | VARCHAR(100) |  | ‡∏Å‡∏≤‡∏£‡∏Å‡∏£‡∏∞‡∏ó‡∏≥ (‡πÄ‡∏ä‡πà‡∏ô rfa.create) |
| entity\_type | VARCHAR(50) |  | ‡∏ï‡∏≤‡∏£‡∏≤‡∏á/‡πÇ‡∏°‡∏î‡∏π‡∏• (‡πÄ‡∏ä‡πà‡∏ô rfas) |
| entity\_id | VARCHAR(50) |  | ID ‡∏Ç‡∏≠‡∏á‡∏™‡∏¥‡πà‡∏á‡∏ó‡∏µ‡πà‡∏ñ‡∏π‡∏Å‡∏Å‡∏£‡∏∞‡∏ó‡∏≥ |
| details\_json | JSON |  | ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÄ‡∏ï‡∏¥‡∏° |
| ip\_address | VARCHAR(45) |  | IP Address |
| created\_at | TIMESTAMP |  | ‡πÄ‡∏ß‡∏•‡∏≤‡∏ó‡∏µ‡πà‡∏Å‡∏£‡∏∞‡∏ó‡∏≥ |

* **Foreign Keys (FK):** user\_id \-\> users(user\_id) (ON DELETE SET NULL)

## **11\. üìã Views & Procedures (‡∏ß‡∏¥‡∏ß ‡πÅ‡∏•‡∏∞ ‡πÇ‡∏õ‡∏£‡∏ã‡∏µ‡πÄ‡∏î‡∏≠‡∏£‡πå)**

#### **11.1. sp\_get\_next\_document\_number (Procedure)**

**(‡πÉ‡∏´‡∏°‡πà)** Stored Procedure ‡πÄ‡∏î‡∏µ‡∏¢‡∏ß‡∏ó‡∏µ‡πà‡πÉ‡∏ä‡πâ‡πÉ‡∏ô‡∏£‡∏∞‡∏ö‡∏ö (Req 2.9.3)

* **‡∏´‡∏ô‡πâ‡∏≤‡∏ó‡∏µ‡πà:** ‡∏î‡∏∂‡∏á‡πÄ‡∏•‡∏Ç‡∏ó‡∏µ‡πà‡πÄ‡∏≠‡∏Å‡∏™‡∏≤‡∏£‡∏ñ‡∏±‡∏î‡πÑ‡∏õ (Next Running Number) ‡∏à‡∏≤‡∏Å‡∏ï‡∏≤‡∏£‡∏≤‡∏á document\_number\_counters  
* **‡∏ï‡∏£‡∏£‡∏Å‡∏∞:** ‡πÉ‡∏ä‡πâ SELECT ... FOR UPDATE ‡πÄ‡∏û‡∏∑‡πà‡∏≠ "‡∏•‡πá‡∏≠‡∏Å" ‡πÅ‡∏ñ‡∏ß ‡∏õ‡πâ‡∏≠‡∏á‡∏Å‡∏±‡∏ô Race Condition (‡∏Å‡∏≤‡∏£‡∏ó‡∏µ‡πà‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ 2 ‡∏Ñ‡∏ô‡πÑ‡∏î‡πâ‡πÄ‡∏•‡∏Ç‡∏ó‡∏µ‡πà‡∏ã‡πâ‡∏≥‡∏Å‡∏±‡∏ô)

#### **11.2. v\_current\_correspondences (View)**

* **‡∏´‡∏ô‡πâ‡∏≤‡∏ó‡∏µ‡πà:** ‡πÅ‡∏™‡∏î‡∏á Revision "‡∏õ‡∏±‡∏à‡∏à‡∏∏‡∏ö‡∏±‡∏ô" (is\_current \= TRUE) ‡∏Ç‡∏≠‡∏á correspondences ‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î (‡∏ó‡∏µ‡πà‡πÑ‡∏°‡πà‡πÉ‡∏ä‡πà RFA)

#### **11.3. v\_current\_rfas (View)**

* **‡∏´‡∏ô‡πâ‡∏≤‡∏ó‡∏µ‡πà:** ‡πÅ‡∏™‡∏î‡∏á Revision "‡∏õ‡∏±‡∏à‡∏à‡∏∏‡∏ö‡∏±‡∏ô" (is\_current \= TRUE) ‡∏Ç‡∏≠‡∏á rfa\_revisions ‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î

#### **11.4. v\_user\_tasks (View)**

**(‡πÉ‡∏´‡∏°‡πà)**

* **‡∏´‡∏ô‡πâ‡∏≤‡∏ó‡∏µ‡πà:** ‡πÅ‡∏™‡∏î‡∏á‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£ "‡∏á‡∏≤‡∏ô‡∏Ç‡∏≠‡∏á‡∏â‡∏±‡∏ô" (My Tasks) ‡∏ó‡∏µ‡πà‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡πÄ‡∏™‡∏£‡πá‡∏à (Req 5.3)  
* **‡∏ï‡∏£‡∏£‡∏Å‡∏∞:** JOIN ‡∏ï‡∏≤‡∏£‡∏≤‡∏á circulations ‡∏Å‡∏±‡∏ö circulation\_assignees (‡∏ó‡∏µ‡πà is\_completed \= FALSE)

#### **11.5. v\_audit\_log\_details (View)**

**(‡πÉ‡∏´‡∏°‡πà)**

* **‡∏´‡∏ô‡πâ‡∏≤‡∏ó‡∏µ‡πà:** ‡πÅ‡∏™‡∏î‡∏á audit\_logs ‡∏û‡∏£‡πâ‡∏≠‡∏°‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏• username ‡πÅ‡∏•‡∏∞ email ‡∏Ç‡∏≠‡∏á‡∏ú‡∏π‡πâ‡∏Å‡∏£‡∏∞‡∏ó‡∏≥ (Req 6.1)

#### **11.6. v\_user\_all\_permissions (View)**

**(‡πÉ‡∏´‡∏°‡πà)**

* **‡∏´‡∏ô‡πâ‡∏≤‡∏ó‡∏µ‡πà:** ‡∏£‡∏ß‡∏°‡∏™‡∏¥‡∏ó‡∏ò‡∏¥‡πå‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î (Global \+ Project) ‡∏Ç‡∏≠‡∏á‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ‡∏ó‡∏∏‡∏Å‡∏Ñ‡∏ô ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÉ‡∏´‡πâ Backend ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏™‡∏¥‡∏ó‡∏ò‡∏¥‡πå‡πÑ‡∏î‡πâ‡∏á‡πà‡∏≤‡∏¢ (Req 4.2)  
* **‡∏ï‡∏£‡∏£‡∏Å‡∏∞:** UNION ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏à‡∏≤‡∏Å user\_roles ‡πÅ‡∏•‡∏∞ user\_project\_roles